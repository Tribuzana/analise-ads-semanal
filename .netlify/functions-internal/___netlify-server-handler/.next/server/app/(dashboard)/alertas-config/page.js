(()=>{var e={};e.id=794,e.ids=[794],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16693:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(28417),a(85719),a(35866),a(11506);var r=a(23191),t=a(88716),n=a(37922),o=a.n(n),l=a(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(s,i);let d=["",{children:["(dashboard)",{children:["alertas-config",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,28417)),"C:\\Users\\atend\\OneDrive\\Documents\\Cursor Tribuzana\\marketing-analytics\\app\\(dashboard)\\alertas-config\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,85719)),"C:\\Users\\atend\\OneDrive\\Documents\\Cursor Tribuzana\\marketing-analytics\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"C:\\Users\\atend\\OneDrive\\Documents\\Cursor Tribuzana\\marketing-analytics\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\atend\\OneDrive\\Documents\\Cursor Tribuzana\\marketing-analytics\\app\\(dashboard)\\alertas-config\\page.tsx"],u="/(dashboard)/alertas-config/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(dashboard)/alertas-config/page",pathname:"/alertas-config",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},92482:(e,s,a)=>{let r={"4fb7291308caa69a64f14ea764e4da7ccd3eddaa":()=>Promise.resolve().then(a.bind(a,35629)).then(e=>e.generateAlerts)};async function t(e,...s){return(await r[e]()).apply(null,s)}e.exports={"4fb7291308caa69a64f14ea764e4da7ccd3eddaa":t.bind(null,"4fb7291308caa69a64f14ea764e4da7ccd3eddaa")}},45016:(e,s,a)=>{Promise.resolve().then(a.bind(a,98933))},98933:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var r=a(10326),t=a(17577),n=a(95035),o=a(68346),l=a(33071),i=a(31048),d=a(54432),c=a(90772),u=a(34474),h=a(33261),m=a(85999),p=a(88378),x=a(76557);let f=(0,x.Z)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),b=(0,x.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var g=a(35047);function j(){let{usuario:e}=(0,n.a)(),{hoteis:s}=(0,o.q)();(0,g.useRouter)();let[a,x]=(0,t.useState)(null),[j,y]=(0,t.useState)({hotelId:0,nomeHotel:"",rules:{roasMin:2,cpaMax:500,ctrMin:1},webhookUrl:null,webhookSecret:null,webhookActive:!1}),v=async()=>{if(!j.webhookUrl){m.A.error("Configure a URL do webhook primeiro");return}try{let e=await fetch(j.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json",...j.webhookSecret&&{Authorization:`Bearer ${j.webhookSecret}`}},body:JSON.stringify({test:!0,timestamp:new Date().toISOString(),message:"Teste de webhook do Tribuzana"})});e.ok?m.A.success("Webhook testado com sucesso!"):m.A.error(`Erro ao testar webhook: ${e.status}`)}catch(e){m.A.error("Erro ao conectar com o webhook"),console.error(e)}};return e?.nivel_acesso!=="admin"?r.jsx("div",{className:"flex h-full items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-medium text-red-600",children:"Acesso restrito"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Esta p\xe1gina \xe9 acess\xedvel apenas para administradores"})]})}):(0,r.jsxs)("div",{className:"space-y-10 pb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(p.Z,{className:"h-8 w-8 text-primary"}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Configura\xe7\xe3o de Alertas"}),r.jsx("p",{className:"text-muted-foreground",children:"Configure regras personalizadas e webhook N8N"})]})]}),r.jsx("div",{className:"py-6",children:(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[r.jsx(l.ll,{children:"Selecione o Hotel"}),r.jsx(l.SZ,{children:"Configure alertas espec\xedficos para cada hotel"})]}),r.jsx(l.aY,{children:(0,r.jsxs)(u.Ph,{value:a?.toString(),onValueChange:e=>x(Number(e)),children:[r.jsx(u.i4,{children:r.jsx(u.ki,{placeholder:"Selecione um hotel"})}),r.jsx(u.Bw,{children:s.map(e=>r.jsx(u.Ql,{value:e.id.toString(),children:e.nome_fantasia||e.nome_hotel},e.id))})]})})]})}),a&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"py-6",children:(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[r.jsx(l.ll,{children:"Regras de Performance"}),r.jsx(l.SZ,{children:"Defina os limites para alertas de baixa performance"})]}),r.jsx(l.aY,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(i._,{htmlFor:"roas",children:"ROAS M\xednimo"}),r.jsx(d.I,{id:"roas",type:"number",step:"0.1",value:j.rules.roasMin,onChange:e=>y({...j,rules:{...j.rules,roasMin:Number(e.target.value)}})}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Alerta se ROAS < ",j.rules.roasMin]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(i._,{htmlFor:"cpa",children:"CPA M\xe1ximo (R$)"}),r.jsx(d.I,{id:"cpa",type:"number",step:"10",value:j.rules.cpaMax,onChange:e=>y({...j,rules:{...j.rules,cpaMax:Number(e.target.value)}})}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Alerta se CPA > R$ ",j.rules.cpaMax]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(i._,{htmlFor:"ctr",children:"CTR M\xednimo (%)"}),r.jsx(d.I,{id:"ctr",type:"number",step:"0.1",value:j.rules.ctrMin,onChange:e=>y({...j,rules:{...j.rules,ctrMin:Number(e.target.value)}})}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Alerta se CTR < ",j.rules.ctrMin,"%"]})]})]})})]})}),r.jsx("div",{className:"py-6",children:(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[r.jsx(l.ll,{children:"Webhook N8N"}),r.jsx(l.SZ,{children:"Configure webhook para receber alertas no N8N"})]}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[r.jsx(i._,{children:"Webhook Ativo"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Enviar alertas automaticamente"})]}),r.jsx(h.r,{checked:j.webhookActive,onCheckedChange:e=>y({...j,webhookActive:e})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(i._,{htmlFor:"webhook-url",children:"URL do Webhook"}),r.jsx(d.I,{id:"webhook-url",type:"url",placeholder:"https://n8n.example.com/webhook/alertas",value:j.webhookUrl||"",onChange:e=>y({...j,webhookUrl:e.target.value||null})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(i._,{htmlFor:"webhook-secret",children:"Secret Token"}),r.jsx(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);y({...j,webhookSecret:e})},children:"Gerar Token"})]}),r.jsx(d.I,{id:"webhook-secret",type:"text",placeholder:"Token de autentica\xe7\xe3o",value:j.webhookSecret||"",onChange:e=>y({...j,webhookSecret:e.target.value||null})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Use este token como Bearer token no N8N"})]}),(0,r.jsxs)(c.z,{variant:"outline",onClick:v,disabled:!j.webhookUrl,children:[r.jsx(f,{className:"mr-2 h-4 w-4"}),"Testar Webhook"]})]})]})}),r.jsx("div",{className:"py-6 flex justify-end",children:(0,r.jsxs)(c.z,{onClick:()=>{let e=[],s=e.findIndex(e=>e.hotelId===j.hotelId);s>=0?e[s]=j:e.push(j),localStorage.setItem("tribuzana_alert_configs",JSON.stringify(e)),m.A.success("Configura\xe7\xf5es salvas com sucesso!")},size:"lg",children:[r.jsx(b,{className:"mr-2 h-4 w-4"}),"Salvar Configura\xe7\xf5es"]})})]})]})}},54432:(e,s,a)=>{"use strict";a.d(s,{I:()=>o});var r=a(10326),t=a(17577),n=a(11105);let o=t.forwardRef(({className:e,type:s,...a},t)=>r.jsx("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));o.displayName="Input"},34474:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>x,Ph:()=>c,Ql:()=>f,i4:()=>h,ki:()=>u});var r=a(10326),t=a(17577),n=a(44919),o=a(941),l=a(96633),i=a(32933),d=a(11105);let c=n.fC;n.ZA;let u=n.B4,h=t.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,r.jsx(n.JO,{asChild:!0,children:r.jsx(o.Z,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=n.xz.displayName;let m=t.forwardRef(({className:e,...s},a)=>r.jsx(n.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(l.Z,{className:"h-4 w-4"})}));m.displayName=n.u_.displayName;let p=t.forwardRef(({className:e,...s},a)=>r.jsx(n.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(o.Z,{className:"h-4 w-4"})}));p.displayName=n.$G.displayName;let x=t.forwardRef(({className:e,children:s,position:a="popper",...t},o)=>r.jsx(n.h_,{children:(0,r.jsxs)(n.VY,{ref:o,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...t,children:[r.jsx(m,{}),r.jsx(n.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),r.jsx(p,{})]})}));x.displayName=n.VY.displayName,t.forwardRef(({className:e,...s},a)=>r.jsx(n.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=n.__.displayName;let f=t.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(n.wU,{children:r.jsx(i.Z,{className:"h-4 w-4"})})}),r.jsx(n.eT,{children:s})]}));f.displayName=n.ck.displayName,t.forwardRef(({className:e,...s},a)=>r.jsx(n.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=n.Z0.displayName},33261:(e,s,a)=>{"use strict";a.d(s,{r:()=>l});var r=a(10326),t=a(17577),n=a(60371),o=a(11105);let l=t.forwardRef(({className:e,...s},a)=>r.jsx(n.fC,{className:(0,o.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:a,children:r.jsx(n.bU,{className:(0,o.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));l.displayName=n.fC.displayName},28417:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\atend\OneDrive\Documents\Cursor Tribuzana\marketing-analytics\app\(dashboard)\alertas-config\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[276,992,162,808,861,220],()=>a(16693));module.exports=r})();