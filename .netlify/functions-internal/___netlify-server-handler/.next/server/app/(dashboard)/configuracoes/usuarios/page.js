(()=>{var e={};e.id=481,e.ids=[481],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},20786:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d}),a(92504),a(85719),a(35866),a(11506);var r=a(23191),t=a(88716),i=a(37922),n=a.n(i),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(s,o);let d=["",{children:["(dashboard)",{children:["configuracoes",{children:["usuarios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,92504)),"C:\\Users\\atend\\OneDrive\\Documents\\Cursor Tribuzana\\marketing-analytics\\app\\(dashboard)\\configuracoes\\usuarios\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,85719)),"C:\\Users\\atend\\OneDrive\\Documents\\Cursor Tribuzana\\marketing-analytics\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"C:\\Users\\atend\\OneDrive\\Documents\\Cursor Tribuzana\\marketing-analytics\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\atend\\OneDrive\\Documents\\Cursor Tribuzana\\marketing-analytics\\app\\(dashboard)\\configuracoes\\usuarios\\page.tsx"],u="/(dashboard)/configuracoes/usuarios/page",m={require:a,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(dashboard)/configuracoes/usuarios/page",pathname:"/configuracoes/usuarios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},92482:(e,s,a)=>{let r={"4fb7291308caa69a64f14ea764e4da7ccd3eddaa":()=>Promise.resolve().then(a.bind(a,35629)).then(e=>e.generateAlerts)};async function t(e,...s){return(await r[e]()).apply(null,s)}e.exports={"4fb7291308caa69a64f14ea764e4da7ccd3eddaa":t.bind(null,"4fb7291308caa69a64f14ea764e4da7ccd3eddaa")}},25262:(e,s,a)=>{Promise.resolve().then(a.bind(a,40563))},40563:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var r=a(10326),t=a(17577),i=a(95035),n=a(35047),l=a(42945),o=a(33071),d=a(90772),c=a(54432),u=a(31048),m=a(33261),f=a(34474),p=a(24061),x=a(69508),h=a(85999);function g(){let{usuario:e,loading:s}=(0,i.a)();(0,n.useRouter)();let a=(0,l.e)(),[c,u]=(0,t.useState)([]),[f,g]=(0,t.useState)(!0),[j,b]=(0,t.useState)(null),[y,N]=(0,t.useState)(!1),w=(0,t.useCallback)(async()=>{try{let{data:e,error:s}=await a.from("usuarios").select("*").order("nome_completo");if(s)throw s;u(e||[])}catch(e){h.A.error("Erro ao carregar usu\xe1rios: "+e.message)}finally{g(!1)}},[a]),_=async e=>{try{if(j){let{error:s}=await a.from("usuarios").update(e).eq("id",j.id);if(s)throw s;h.A.success("Usu\xe1rio atualizado com sucesso!")}else{h.A.error("Cria\xe7\xe3o de usu\xe1rios deve ser feita atrav\xe9s do Supabase Auth");return}N(!1),b(null),w()}catch(e){h.A.error("Erro ao salvar usu\xe1rio: "+e.message)}},k=async(e,s)=>{try{let{error:r}=await a.from("usuarios").update({ativo:!s}).eq("id",e);if(r)throw r;h.A.success(`Usu\xe1rio ${s?"desativado":"ativado"} com sucesso!`),w()}catch(e){h.A.error("Erro ao atualizar usu\xe1rio: "+e.message)}};return s||f?r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})}):e?.nivel_acesso!=="admin"?null:(0,r.jsxs)("div",{className:"space-y-10 pb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(p.Z,{className:"h-8 w-8 text-primary"}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Gerenciamento de Usu\xe1rios"}),r.jsx("p",{className:"text-muted-foreground",children:"Gerencie usu\xe1rios e permiss\xf5es do sistema"})]})]}),y&&j&&r.jsx("div",{className:"py-6",children:r.jsx(v,{usuario:j,onSave:_,onCancel:()=>{N(!1),b(null)}})}),r.jsx("div",{className:"py-6",children:r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(e=>(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx(o.ll,{children:e.nome_completo}),r.jsx(o.SZ,{children:e.email})]}),r.jsx(d.z,{variant:"ghost",size:"icon",onClick:()=>{b(e),N(!0)},children:r.jsx(x.Z,{className:"h-4 w-4"})})]})}),(0,r.jsxs)(o.aY,{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"N\xedvel de Acesso"}),r.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:e.nivel_acesso})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Ativo"}),r.jsx(m.r,{checked:e.ativo,onCheckedChange:()=>k(e.id,e.ativo)})]})]})]},e.id))})})]})}function v({usuario:e,onSave:s,onCancel:a}){let[i,n]=(0,t.useState)({nome_completo:e.nome_completo,nivel_acesso:e.nivel_acesso,ativo:e.ativo,telefone:e.telefone||""});return(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:r.jsx(o.ll,{children:"Editar Usu\xe1rio"})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"email",children:"Email"}),r.jsx(c.I,{id:"email",value:e.email,disabled:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"nome_completo",children:"Nome Completo *"}),r.jsx(c.I,{id:"nome_completo",value:i.nome_completo,onChange:e=>n({...i,nome_completo:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"nivel_acesso",children:"N\xedvel de Acesso"}),(0,r.jsxs)(f.Ph,{value:i.nivel_acesso,onValueChange:e=>n({...i,nivel_acesso:e}),children:[r.jsx(f.i4,{children:r.jsx(f.ki,{})}),(0,r.jsxs)(f.Bw,{children:[r.jsx(f.Ql,{value:"admin",children:"Admin"}),r.jsx(f.Ql,{value:"gerente",children:"Gerente"}),r.jsx(f.Ql,{value:"analista",children:"Analista"}),r.jsx(f.Ql,{value:"usuario",children:"Usu\xe1rio"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"telefone",children:"Telefone"}),r.jsx(c.I,{id:"telefone",value:i.telefone,onChange:e=>n({...i,telefone:e.target.value})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(m.r,{checked:i.ativo,onCheckedChange:e=>n({...i,ativo:e})}),r.jsx(u._,{children:"Usu\xe1rio Ativo"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(d.z,{variant:"outline",onClick:a,children:"Cancelar"}),r.jsx(d.z,{onClick:()=>s(i),children:"Salvar"})]})]})]})]})}},54432:(e,s,a)=>{"use strict";a.d(s,{I:()=>n});var r=a(10326),t=a(17577),i=a(11105);let n=t.forwardRef(({className:e,type:s,...a},t)=>r.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));n.displayName="Input"},34474:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>x,Ph:()=>c,Ql:()=>h,i4:()=>m,ki:()=>u});var r=a(10326),t=a(17577),i=a(44919),n=a(941),l=a(96633),o=a(32933),d=a(11105);let c=i.fC;i.ZA;let u=i.B4,m=t.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(i.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,r.jsx(i.JO,{asChild:!0,children:r.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=i.xz.displayName;let f=t.forwardRef(({className:e,...s},a)=>r.jsx(i.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(l.Z,{className:"h-4 w-4"})}));f.displayName=i.u_.displayName;let p=t.forwardRef(({className:e,...s},a)=>r.jsx(i.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:r.jsx(n.Z,{className:"h-4 w-4"})}));p.displayName=i.$G.displayName;let x=t.forwardRef(({className:e,children:s,position:a="popper",...t},n)=>r.jsx(i.h_,{children:(0,r.jsxs)(i.VY,{ref:n,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...t,children:[r.jsx(f,{}),r.jsx(i.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),r.jsx(p,{})]})}));x.displayName=i.VY.displayName,t.forwardRef(({className:e,...s},a)=>r.jsx(i.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=i.__.displayName;let h=t.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(i.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(i.wU,{children:r.jsx(o.Z,{className:"h-4 w-4"})})}),r.jsx(i.eT,{children:s})]}));h.displayName=i.ck.displayName,t.forwardRef(({className:e,...s},a)=>r.jsx(i.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=i.Z0.displayName},33261:(e,s,a)=>{"use strict";a.d(s,{r:()=>l});var r=a(10326),t=a(17577),i=a(60371),n=a(11105);let l=t.forwardRef(({className:e,...s},a)=>r.jsx(i.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:a,children:r.jsx(i.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));l.displayName=i.fC.displayName},69508:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(76557).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},24061:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},92504:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\atend\OneDrive\Documents\Cursor Tribuzana\marketing-analytics\app\(dashboard)\configuracoes\usuarios\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[276,992,162,808,861,220],()=>a(20786));module.exports=r})();