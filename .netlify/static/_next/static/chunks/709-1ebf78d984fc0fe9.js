"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[709],{18136:function(e,t,r){r.d(t,{G:function(){return x}});var a=r(57437),n=r(2265),s=r(73578),c=r(35974),i=r(1828),l=r(26815),d=r(50754),o=r(47984),u=r(28842),m=r(20265),f=r(15051);function x(e){let{campaigns:t,previousCampaigns:r,onCampaignClick:x}=e,[p,h]=(0,n.useState)(!0),[j,g]=(0,n.useState)(null),[v,b]=(0,n.useState)("desc"),N=(0,n.useMemo)(()=>{let e=new Map;return r.forEach(t=>{let r="".concat(t.campaign_id,"_").concat(t.platform);e.set(r,t)}),e},[r]),y=(0,n.useMemo)(()=>t.map(e=>{let t="".concat(e.campaign_id,"_").concat(e.platform),r=function(e,t){if(!t)return{spend:0,revenue:0,conversions:0,cpa:0,roas:0};let r=(e,t)=>0===t?e>0?100:0:(e-t)/t*100;return{spend:r(e.spend,t.spend),revenue:r(e.revenue,t.revenue),conversions:r(e.conversions,t.conversions),cpa:r(e.cpa,t.cpa),roas:r(e.roas,t.roas)}}(e,N.get(t));return{...e,variation:r}}),[t,N]),w=(0,n.useMemo)(()=>p?y.filter(e=>{if(!e.campaign_status)return!1;let t=e.campaign_status.toUpperCase();return"ACTIVE"===t||"ENABLED"===t}):y,[y,p]),C=(0,n.useMemo)(()=>j?[...w].sort((e,t)=>{let r,a;switch(j){case"campaign_name":r=e.campaign_name||"",a=t.campaign_name||"";break;case"campaign_objective":r=e.campaign_objective||"",a=t.campaign_objective||"";break;case"spend":r=e.spend,a=t.spend;break;case"revenue":r=e.revenue,a=t.revenue;break;case"roas":r=e.roas,a=t.roas;break;case"conversions":r=e.conversions,a=t.conversions;break;case"cpa":r=e.cpa,a=t.cpa;break;default:return 0}return"string"==typeof r&&"string"==typeof a?"asc"===v?r.localeCompare(a):a.localeCompare(r):"asc"===v?r-a:a-r}):[...w].sort((e,t)=>t.roas-e.roas),[w,j,v]),k=e=>{j===e?b("asc"===v?"desc":"asc"):(g(e),b("desc"))},R=e=>{let{field:t}=e;return j!==t?(0,a.jsx)(u.Z,{className:"ml-2 h-4 w-4 opacity-50"}):"asc"===v?(0,a.jsx)(m.Z,{className:"ml-2 h-4 w-4"}):(0,a.jsx)(f.Z,{className:"ml-2 h-4 w-4"})},_=e=>{let{field:t,children:r,className:n}=e;return(0,a.jsx)(s.ss,{className:(0,o.cn)("cursor-pointer hover:bg-muted select-none",j===t&&"font-bold",n),onClick:()=>k(t),"aria-sort":j===t?"asc"===v?"ascending":"descending":"none",children:(0,a.jsxs)("div",{className:"flex items-center justify-end",children:[r,(0,a.jsx)(R,{field:t})]})})},D=e=>{let{field:t,children:r,className:n}=e;return(0,a.jsx)(s.ss,{className:(0,o.cn)("cursor-pointer hover:bg-muted select-none",j===t&&"font-bold",n),onClick:()=>k(t),"aria-sort":j===t?"asc"===v?"ascending":"descending":"none",children:(0,a.jsxs)("div",{className:"flex items-center",children:[r,(0,a.jsx)(R,{field:t})]})})},S=e=>{let{value:t}=e;if(0===t||isNaN(t))return(0,a.jsx)(c.C,{variant:"secondary",className:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:(0,a.jsx)("span",{className:"text-xs",children:"-"})});let r=t>0;return(0,a.jsxs)(c.C,{variant:"secondary",className:(0,o.cn)("gap-1",r?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:[r?(0,a.jsx)(m.Z,{className:"h-3 w-3"}):(0,a.jsx)(f.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"text-xs",children:[Math.abs(t).toFixed(1),"%"]})]})};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Campanhas e varia\xe7\xe3o vs per\xedodo anterior"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l._,{htmlFor:"only-active",className:"text-sm cursor-pointer",children:"Apenas ativas"}),(0,a.jsx)(i.r,{id:"only-active",checked:p,onCheckedChange:h})]})]}),(0,a.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,a.jsxs)(s.iA,{children:[(0,a.jsx)(s.xD,{children:(0,a.jsxs)(s.SC,{children:[(0,a.jsx)(D,{field:"campaign_name",children:"Campanha"}),(0,a.jsx)(D,{field:"campaign_objective",children:"Objetivo"}),(0,a.jsx)(s.ss,{className:"text-right",children:"Investimento"}),(0,a.jsx)(s.ss,{className:"text-right",children:"% Inv."}),(0,a.jsx)(_,{field:"conversions",className:"text-right",children:"Resultados"}),(0,a.jsx)(s.ss,{className:"text-right",children:"% A\xe7\xf5es"}),(0,a.jsx)(_,{field:"cpa",className:"text-right",children:"CPA"}),(0,a.jsx)(s.ss,{className:"text-right",children:"% CPA"}),(0,a.jsx)(_,{field:"revenue",className:"text-right",children:"Receita"}),(0,a.jsx)(s.ss,{className:"text-right",children:"% Receita"}),(0,a.jsx)(_,{field:"roas",className:"text-right",children:"ROAS"}),(0,a.jsx)(s.ss,{className:"text-right",children:"% ROAS"})]})}),(0,a.jsx)(s.RM,{children:0===C.length?(0,a.jsx)(s.SC,{children:(0,a.jsx)(s.pj,{colSpan:12,className:"text-center text-muted-foreground",children:"Nenhuma campanha encontrada"})}):C.map(e=>(0,a.jsxs)(s.SC,{onClick:()=>null==x?void 0:x(e),className:x?"cursor-pointer":"",children:[(0,a.jsx)(s.pj,{className:"font-medium max-w-[300px] truncate",title:e.campaign_name||"",children:e.campaign_name||"Sem nome"}),(0,a.jsx)(s.pj,{className:"max-w-[200px] truncate",title:e.campaign_objective||"",children:e.campaign_objective||"N/A"}),(0,a.jsx)(s.pj,{className:"text-right",children:(0,d.xG)(e.spend)}),(0,a.jsx)(s.pj,{className:"text-right",children:e.variation&&(0,a.jsx)(S,{value:e.variation.spend})}),(0,a.jsx)(s.pj,{className:"text-right",children:(0,d.uf)(e.conversions)}),(0,a.jsx)(s.pj,{className:"text-right",children:e.variation&&(0,a.jsx)(S,{value:e.variation.conversions})}),(0,a.jsx)(s.pj,{className:"text-right",children:(0,d.xG)(e.cpa)}),(0,a.jsx)(s.pj,{className:"text-right",children:e.variation&&(0,a.jsx)(S,{value:e.variation.cpa})}),(0,a.jsx)(s.pj,{className:"text-right",children:(0,d.xG)(e.revenue)}),(0,a.jsx)(s.pj,{className:"text-right",children:e.variation&&(0,a.jsx)(S,{value:e.variation.revenue})}),(0,a.jsx)(s.pj,{className:"text-right font-bold",children:e.roas.toFixed(2)}),(0,a.jsx)(s.pj,{className:"text-right",children:e.variation&&(0,a.jsx)(S,{value:e.variation.roas})})]},"".concat(e.campaign_id,"_").concat(e.platform)))})]})})]})}},83348:function(e,t,r){r.d(t,{i:function(){return o}});var a=r(57437),n=r(66070),s=r(35974),c=r(21047),i=r(20265),l=r(15051),d=r(47984);function o(e){let{title:t,value:r,change:o,subtitle:u,icon:m,compareValue:f,compareLabel:x="vs ano anterior"}=e;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:t}),m&&(0,a.jsx)("div",{className:"text-muted-foreground",children:m})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:r}),void 0!==f&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[x,": ",f]}),u&&!f&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:u}),void 0!==o&&(0,a.jsxs)(s.C,{variant:"secondary",className:(0,d.cn)("mt-2 gap-1",void 0===o||0===o?"bg-gray-100 text-gray-800":o>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[void 0===o||0===o?(0,a.jsx)(c.Z,{className:"h-3 w-3"}):o>0?(0,a.jsx)(i.Z,{className:"h-3 w-3"}):(0,a.jsx)(l.Z,{className:"h-3 w-3"}),Math.abs(o).toFixed(1),"%"]})]})]})}},63276:function(e,t,r){r.d(t,{D:function(){return c}});var a=r(57437),n=r(66070),s=r(50754);function c(e){let{data:t}=e;if(0===t.length)return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"An\xe1lise por Objetivo de Campanha"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nenhum dado dispon\xedvel"})})]});let r=Math.max(...t.map(e=>e.spend),1);return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"An\xe1lise por Objetivo de Campanha"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:e.objective}),(0,a.jsxs)("div",{className:"flex gap-4 text-muted-foreground",children:[(0,a.jsxs)("span",{children:[e.campaigns," campanhas"]}),(0,a.jsx)("span",{className:"font-semibold text-foreground",children:(0,s.xG)(e.spend)})]})]}),(0,a.jsx)("div",{className:"h-2 w-full rounded-full bg-secondary/20",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-primary",style:{width:"".concat(e.spend/r*100,"%")}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["ROAS: ",e.roas.toFixed(2)]}),(0,a.jsxs)("span",{children:["Receita: ",(0,s.xG)(e.revenue)]})]})]},e.objective))})})]})}},35974:function(e,t,r){r.d(t,{C:function(){return i}});var a=r(57437);r(2265);var n=r(90535),s=r(47984);let c=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(c({variant:r}),t),...n})}},66070:function(e,t,r){r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return c},aY:function(){return o},ll:function(){return l}});var a=r(57437),n=r(2265),s=r(47984);let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});c.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-2 p-6",r),...n})});i.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});o.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},26815:function(e,t,r){r.d(t,{_:function(){return d}});var a=r(57437),n=r(2265),s=r(6394),c=r(90535),i=r(47984);let l=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,i.cn)(l(),r),...n})});d.displayName=s.f.displayName},93022:function(e,t,r){r.d(t,{O:function(){return s}});var a=r(57437),n=r(47984);function s(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...r})}},1828:function(e,t,r){r.d(t,{r:function(){return i}});var a=r(57437),n=r(2265),s=r(11774),c=r(47984);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.fC,{className:(0,c.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...n,ref:t,children:(0,a.jsx)(s.bU,{className:(0,c.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=s.fC.displayName},73578:function(e,t,r){r.d(t,{RM:function(){return l},Rn:function(){return m},SC:function(){return d},iA:function(){return c},pj:function(){return u},ss:function(){return o},xD:function(){return i}});var a=r(57437),n=r(2265),s=r(47984);let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",r),...n})})});c.displayName="Table";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",r),...n})});i.displayName="TableHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...n})});l.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});d.displayName="TableRow";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});o.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableCell";let m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...n})});m.displayName="TableCaption"},2621:function(e,t,r){r.d(t,{FilterProvider:function(){return i},j:function(){return l}});var a=r(57437),n=r(2265),s=r(61422);let c=(0,n.createContext)(void 0);function i(e){let{children:t}=e,{startDate:r,endDate:i}=(0,s.e6)(),[l,d]=(0,n.useState)([]),[o,u]=(0,n.useState)(r),[m,f]=(0,n.useState)(i),[x,p]=(0,n.useState)([]),[h,j]=(0,n.useState)([]),[g,v]=(0,n.useState)(!1),[b,N]=(0,n.useState)([]),[y,w]=(0,n.useState)([]);return(0,n.useEffect)(()=>{let e=localStorage.getItem("tribuzana_filters");if(e)try{let t=JSON.parse(e);t.selectedHotels&&d(t.selectedHotels),t.startDate&&u(t.startDate),t.endDate&&f(t.endDate),t.selectedCidades&&p(t.selectedCidades),t.selectedEstados&&j(t.selectedEstados),void 0!==t.compareYearAgo&&v(t.compareYearAgo)}catch(e){console.error("Erro ao carregar filtros salvos:",e)}},[]),(0,n.useEffect)(()=>{o&&m&&localStorage.setItem("tribuzana_filters",JSON.stringify({selectedHotels:l,startDate:o,endDate:m,selectedCidades:x,selectedEstados:h,compareYearAgo:g,selectedObjectives:b,selectedResultTypes:y}))},[l,o,m,x,h,g,b,y]),(0,a.jsx)(c.Provider,{value:{selectedHotels:l,startDate:o,endDate:m,selectedCidades:x,selectedEstados:h,compareYearAgo:g,selectedObjectives:b,selectedResultTypes:y,setSelectedHotels:d,setDateRange:(e,t)=>{u(e),f(t)},setSelectedCidades:p,setSelectedEstados:j,setCompareYearAgo:v,setSelectedObjectives:N,setSelectedResultTypes:w,resetFilters:()=>{d([]);let{startDate:e,endDate:t}=(0,s.e6)();u(e),f(t),p([]),j([]),v(!1),N([]),w([])}},children:t})}let l=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("useFilterContext must be used within a FilterProvider");return e}},58508:function(e,t,r){r.d(t,{U:function(){return s},v:function(){return n}}),r(83079);var a=r(12119),n=(0,a.$)("9d383f78b3294f7a2159cfe822dd240f3d2d2518"),s=(0,a.$)("ab8d8d4fc9c8d183fd0cec25e567119dbe4ba194")},47984:function(e,t,r){r.d(t,{cn:function(){return s}});var a=r(61994),n=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},61422:function(e,t,r){r.d(t,{WF:function(){return f},c8:function(){return u},e6:function(){return o},f:function(){return m}});var a=r(64975),n=r(65399),s=r(65696),c=r(86035),i=r(63070),l=r(945),d=r(27742);let o=()=>{let e=new Date,t=(0,a.k)(e,1),r=(0,a.k)(t,6);return{startDate:(0,n.WU)(r,"yyyy-MM-dd"),endDate:(0,n.WU)(t,"yyyy-MM-dd")}},u=()=>{let e=new Date,t=(0,s.z)((0,a.k)(e,7),{weekStartsOn:0}),r=(0,c.v)((0,a.k)(e,7),{weekStartsOn:0});return{startDate:(0,n.WU)(t,"yyyy-MM-dd"),endDate:(0,n.WU)(r,"yyyy-MM-dd")}},m=()=>{let e=new Date,t=(0,a.k)(e,1),r=(0,i.N)(e);return{startDate:(0,n.WU)(r,"yyyy-MM-dd"),endDate:(0,n.WU)(t,"yyyy-MM-dd")}},f=()=>{let e=(0,l.W)(new Date,1),t=(0,i.N)(e),r=(0,d.V)(e);return{startDate:(0,n.WU)(t,"yyyy-MM-dd"),endDate:(0,n.WU)(r,"yyyy-MM-dd")}}},50754:function(e,t,r){r.d(t,{p6:function(){return c},rl:function(){return s},uf:function(){return n},xG:function(){return a}});let a=e=>null==e?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),n=e=>null==e?"0":new Intl.NumberFormat("pt-BR").format(e),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null==e?"0%":"".concat(e.toFixed(t),"%")},c=e=>{let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("pt-BR").format(t)}}}]);