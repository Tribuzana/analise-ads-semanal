(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{33483:function(e,t,r){Promise.resolve().then(r.bind(r,46281))},46281:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return u},a:function(){return o}});var i=r(57437),a=r(2265),l=r(10970);let n=(0,a.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,a.useState)(null),[o,s]=(0,a.useState)(null),[c,h]=(0,a.useState)(!0),d=(0,l.e)();(0,a.useEffect)(()=>{d.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;u(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),(null==r?void 0:r.user)?I(r.user.id):h(!1)});let{data:{subscription:e}}=d.auth.onAuthStateChange((e,t)=>{var r;u(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),(null==t?void 0:t.user)?I(t.user.id):(s(null),h(!1))});return()=>{e.unsubscribe()}},[]);let I=async e=>{try{let{data:t,error:r}=await d.from("usuarios").select("*").eq("id",e).eq("ativo",!0).single();if(r)throw r;s(t)}catch(e){console.error("Erro ao buscar usu\xe1rio:",e),s(null)}finally{h(!1)}},v=async(e,t)=>{let{error:r}=await d.auth.signInWithPassword({email:e,password:t});if(r)throw r},w=async()=>{try{localStorage.removeItem("tribuzana_filters"),localStorage.removeItem("tribuzana_resolved_alerts"),localStorage.removeItem("tribuzana_sidebar_collapsed");let{error:e}=await d.auth.signOut();if(e)throw console.error("[signOut] Erro do Supabase:",e),u(null),s(null),e;u(null),s(null)}catch(e){throw console.error("[signOut] Erro ao fazer logout:",e),u(null),s(null),e}};return(0,i.jsx)(n.Provider,{value:{user:r,usuario:o,loading:c,signIn:v,signOut:w},children:t})}let o=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},10970:function(e,t,r){"use strict";r.d(t,{e:function(){return o}});var i=r(11259);let a="__supabase_browser_client__",l=new Map;async function n(e,t,r){let i;let a=l.get(e);a&&await a;let n=new Promise(e=>{i=e});l.set(e,n);try{return await r()}finally{i(),l.delete(e)}}let u=(()=>{if(globalThis[a])return globalThis[a];let e="https://hatciwhpzmyidatpiezk.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhhdGNpd2hwem15aWRhdHBpZXprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNDczMDAsImV4cCI6MjA3NTYyMzMwMH0.4gHLRQPAsh08ECaLUxMdSHIvegOXcAv4a_WMFmrJ_qU";return e&&t?(globalThis[a]=(0,i.createBrowserClient)(e,t,{auth:{lock:n}}),globalThis[a]):(console.error("[Supabase Client] Vari\xe1veis de ambiente n\xe3o definidas:",{url:e?"OK":"FALTANDO",key:t?"OK":"FALTANDO"}),null)})(),o=()=>{if(!u){let e="https://hatciwhpzmyidatpiezk.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhhdGNpd2hwem15aWRhdHBpZXprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNDczMDAsImV4cCI6MjA3NTYyMzMwMH0.4gHLRQPAsh08ECaLUxMdSHIvegOXcAv4a_WMFmrJ_qU";if(!e||!t)throw Error("Vari\xe1veis de ambiente do Supabase n\xe3o est\xe3o configuradas. Verifique o arquivo .env.local");return(0,i.createBrowserClient)(e,t,{auth:{lock:n}})}return u}}},function(e){e.O(0,[434,259,971,117,744],function(){return e(e.s=33483)}),_N_E=e.O()}]);