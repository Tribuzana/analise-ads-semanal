(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[913],{61751:function(e,t,r){Promise.resolve().then(r.bind(r,77080))},77080:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(57437),n=r(21256),a=r(66070),l=r(35974),i=r(62869),c=r(39763);let d=(0,c.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var o=r(63639);let u=(0,c.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),f=(0,c.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var m=r(50754),x=r(47984);function y(e){let{alert:t,onResolve:r}=e,n=(()=>{switch(t.severity){case"critical":return{color:"bg-red-50 border-red-200",badgeColor:"bg-red-100 text-red-800",icon:(0,s.jsx)(d,{className:"h-5 w-5 text-red-600"}),label:"Cr\xedtico"};case"warning":return{color:"bg-yellow-50 border-yellow-200",badgeColor:"bg-yellow-100 text-yellow-800",icon:(0,s.jsx)(o.Z,{className:"h-5 w-5 text-yellow-600"}),label:"Aten\xe7\xe3o"};case"info":return{color:"bg-green-50 border-green-200",badgeColor:"bg-green-100 text-green-800",icon:(0,s.jsx)(u,{className:"h-5 w-5 text-green-600"}),label:"Oportunidade"};default:return{color:"bg-gray-50 border-gray-200",badgeColor:"bg-gray-100 text-gray-800",icon:(0,s.jsx)(u,{className:"h-5 w-5 text-gray-600"}),label:"Info"}}})();return(0,s.jsxs)(a.Zb,{className:(0,x.cn)("border-2",n.color),children:[(0,s.jsx)(a.Ol,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[n.icon,(0,s.jsxs)("div",{children:[(0,s.jsx)(a.ll,{className:"text-lg",children:t.campaign_name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[t.client," â€¢ ",t.platform]})]})]}),(0,s.jsx)(l.C,{variant:"secondary",className:n.badgeColor,children:n.label})]})}),(0,s.jsxs)(a.aY,{className:"space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"font-medium",children:t.message})}),t.actions.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-2",children:"A\xe7\xf5es recomendadas:"}),(0,s.jsx)("ul",{className:"text-sm space-y-1 list-disc list-inside text-muted-foreground",children:t.actions.map((e,t)=>(0,s.jsx)("li",{children:e},t))})]}),r&&(0,s.jsxs)(i.z,{size:"sm",variant:"outline",onClick:()=>r(t.id),className:"w-full",children:[(0,s.jsx)(f,{className:"mr-2 h-4 w-4"}),"Marcar como resolvido"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,m.p6)(t.created_at)})]})]})}var g=r(93022);function h(){let{alerts:e,loading:t,error:r,stats:l,resolveAlert:i}=(0,n.Z)();return t?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Alertas"}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(g.O,{className:"h-[120px]"},t))}),(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(g.O,{className:"h-[200px]"},t))})]}):r?(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg font-medium text-red-600",children:"Erro ao carregar alertas"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:r})]})}):(0,s.jsxs)("div",{className:"space-y-10 pb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Alertas Inteligentes"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Monitoramento autom\xe1tico de campanhas e oportunidades"})]}),(0,s.jsx)("div",{className:"py-6",children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)(a.Zb,{children:[(0,s.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.ll,{className:"text-sm font-medium",children:"Cr\xedticos"}),(0,s.jsx)(d,{className:"h-4 w-4 text-red-600"})]}),(0,s.jsx)(a.aY,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:l.critical})})]}),(0,s.jsxs)(a.Zb,{children:[(0,s.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.ll,{className:"text-sm font-medium",children:"Aten\xe7\xe3o"}),(0,s.jsx)(o.Z,{className:"h-4 w-4 text-yellow-600"})]}),(0,s.jsx)(a.aY,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:l.warning})})]}),(0,s.jsxs)(a.Zb,{children:[(0,s.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(a.ll,{className:"text-sm font-medium",children:"Oportunidades"}),(0,s.jsx)(u,{className:"h-4 w-4 text-green-600"})]}),(0,s.jsx)(a.aY,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:l.info})})]})]})}),(0,s.jsx)("div",{className:"py-6",children:0===e.length?(0,s.jsx)(a.Zb,{children:(0,s.jsxs)(a.aY,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(u,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"Nenhum alerta no momento"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Suas campanhas est\xe3o performando bem!"})]})}):(0,s.jsx)("div",{className:"space-y-4",children:e.sort((e,t)=>{let r={critical:0,warning:1,info:2};return r[e.severity]-r[t.severity]}).map(e=>(0,s.jsx)(y,{alert:e,onResolve:i},e.id))})})]})}},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var s=r(57437);r(2265);var n=r(90535),a=r(47984);let l=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(l({variant:r}),t),...n})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return i},z:function(){return c}});var s=r(57437),n=r(2265),a=r(90535),l=r(47984);let i=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:a,...c}=e;return(0,s.jsx)("button",{className:(0,l.cn)(i({variant:n,size:a,className:r})),ref:t,...c})});c.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var s=r(57437),n=r(2265),a=r(47984);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-2 p-6",r),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});o.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},93022:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});var s=r(57437),n=r(47984);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...r})}},2621:function(e,t,r){"use strict";r.d(t,{FilterProvider:function(){return i},j:function(){return c}});var s=r(57437),n=r(2265),a=r(61422);let l=(0,n.createContext)(void 0);function i(e){let{children:t}=e,{startDate:r,endDate:i}=(0,a.e6)(),[c,d]=(0,n.useState)([]),[o,u]=(0,n.useState)(r),[f,m]=(0,n.useState)(i),[x,y]=(0,n.useState)([]),[g,h]=(0,n.useState)([]),[v,p]=(0,n.useState)(!1),[b,j]=(0,n.useState)([]),[N,w]=(0,n.useState)([]);return(0,n.useEffect)(()=>{let e=localStorage.getItem("tribuzana_filters");if(e)try{let t=JSON.parse(e);t.selectedHotels&&d(t.selectedHotels),t.startDate&&u(t.startDate),t.endDate&&m(t.endDate),t.selectedCidades&&y(t.selectedCidades),t.selectedEstados&&h(t.selectedEstados),void 0!==t.compareYearAgo&&p(t.compareYearAgo)}catch(e){console.error("Erro ao carregar filtros salvos:",e)}},[]),(0,n.useEffect)(()=>{o&&f&&localStorage.setItem("tribuzana_filters",JSON.stringify({selectedHotels:c,startDate:o,endDate:f,selectedCidades:x,selectedEstados:g,compareYearAgo:v,selectedObjectives:b,selectedResultTypes:N}))},[c,o,f,x,g,v,b,N]),(0,s.jsx)(l.Provider,{value:{selectedHotels:c,startDate:o,endDate:f,selectedCidades:x,selectedEstados:g,compareYearAgo:v,selectedObjectives:b,selectedResultTypes:N,setSelectedHotels:d,setDateRange:(e,t)=>{u(e),m(t)},setSelectedCidades:y,setSelectedEstados:h,setCompareYearAgo:p,setSelectedObjectives:j,setSelectedResultTypes:w,resetFilters:()=>{d([]);let{startDate:e,endDate:t}=(0,a.e6)();u(e),m(t),y([]),h([]),p(!1),j([]),w([])}},children:t})}let c=()=>{let e=(0,n.useContext)(l);if(void 0===e)throw Error("useFilterContext must be used within a FilterProvider");return e}},21256:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(2265),n=r(2621);r(83079);var a=(0,r(12119).$)("4fb7291308caa69a64f14ea764e4da7ccd3eddaa");function l(){let e=(0,n.j)(),[t,r]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[d,o]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){c(!0),o(null);try{let t={selectedHotels:e.selectedHotels,startDate:e.startDate,endDate:e.endDate,selectedCidades:e.selectedCidades,selectedEstados:e.selectedEstados,compareYearAgo:e.compareYearAgo,selectedObjectives:e.selectedObjectives,selectedResultTypes:e.selectedResultTypes},s=await a(t),n=i(),l=s.filter(e=>!n.includes(e.id));r(l)}catch(e){o(e.message),console.error("[useAlertas] Erro ao buscar alertas:",e)}finally{c(!1)}}()},[e.selectedHotels,e.startDate,e.endDate,e.selectedCidades,e.selectedEstados,e.compareYearAgo,e.selectedObjectives,e.selectedResultTypes]);let u={total:t.length,critical:t.filter(e=>"critical"===e.severity).length,warning:t.filter(e=>"warning"===e.severity).length,info:t.filter(e=>"info"===e.severity).length};return{alerts:t,loading:l,error:d,stats:u,resolveAlert:e=>{let s=i();s.includes(e)||(s.push(e),localStorage.setItem("tribuzana_resolved_alerts",JSON.stringify(s)),r(t.filter(t=>t.id!==e)))}}}function i(){try{let e=localStorage.getItem("tribuzana_resolved_alerts");return e?JSON.parse(e):[]}catch(e){return[]}}},47984:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(61994),n=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},61422:function(e,t,r){"use strict";r.d(t,{WF:function(){return m},c8:function(){return u},e6:function(){return o},f:function(){return f}});var s=r(64975),n=r(65399),a=r(65696),l=r(86035),i=r(63070),c=r(945),d=r(27742);let o=()=>{let e=new Date,t=(0,s.k)(e,1),r=(0,s.k)(t,6);return{startDate:(0,n.WU)(r,"yyyy-MM-dd"),endDate:(0,n.WU)(t,"yyyy-MM-dd")}},u=()=>{let e=new Date,t=(0,a.z)((0,s.k)(e,7),{weekStartsOn:0}),r=(0,l.v)((0,s.k)(e,7),{weekStartsOn:0});return{startDate:(0,n.WU)(t,"yyyy-MM-dd"),endDate:(0,n.WU)(r,"yyyy-MM-dd")}},f=()=>{let e=new Date,t=(0,s.k)(e,1),r=(0,i.N)(e);return{startDate:(0,n.WU)(r,"yyyy-MM-dd"),endDate:(0,n.WU)(t,"yyyy-MM-dd")}},m=()=>{let e=(0,c.W)(new Date,1),t=(0,i.N)(e),r=(0,d.V)(e);return{startDate:(0,n.WU)(t,"yyyy-MM-dd"),endDate:(0,n.WU)(r,"yyyy-MM-dd")}}},50754:function(e,t,r){"use strict";r.d(t,{p6:function(){return l},rl:function(){return a},uf:function(){return n},xG:function(){return s}});let s=e=>null==e?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),n=e=>null==e?"0":new Intl.NumberFormat("pt-BR").format(e),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null==e?"0%":"".concat(e.toFixed(t),"%")},l=e=>{let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("pt-BR").format(t)}},63639:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},90535:function(e,t,r){"use strict";r.d(t,{j:function(){return l}});var s=r(61994);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=s.W,l=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,c=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],s=null==i?void 0:i[e];if(null===t)return null;let a=n(t)||n(s);return l[e][a]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return a(e,c,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...d}[t]):({...i,...d})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[554,189,971,117,744],function(){return e(e.s=61751)}),_N_E=e.O()}]);