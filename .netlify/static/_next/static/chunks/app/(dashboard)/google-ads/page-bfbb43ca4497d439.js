(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{55295:function(e,s,a){Promise.resolve().then(a.bind(a,83240))},83240:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return A}});var l=a(57437),t=a(2265),c=a(2621),i=a(58508),d=a(83348),n=a(50754),o=a(95252),r=a(70525),u=a(16275),m=a(58896),p=a(28921),x=a(42208);function g(e){let{campaigns:s,comparisonCampaigns:a}=e,t=s.reduce((e,s)=>e+s.spend,0),c=s.reduce((e,s)=>e+s.revenue,0),i=s.reduce((e,s)=>e+s.conversions,0),g=s.reduce((e,s)=>e+s.clicks,0),h=s.reduce((e,s)=>e+s.impressions,0),v=t>0?c/t:0,j=i>0?t/i:0,f=g>0?t/g:0,N=h>0?g/h*100:0,b=g>0?i/g*100:0,y=(null==a?void 0:a.reduce((e,s)=>e+s.spend,0))||0,A=(null==a?void 0:a.reduce((e,s)=>e+s.revenue,0))||0,C=(null==a?void 0:a.reduce((e,s)=>e+s.conversions,0))||0,G=(null==a?void 0:a.reduce((e,s)=>e+s.clicks,0))||0,D=(null==a?void 0:a.reduce((e,s)=>e+s.impressions,0))||0,E=G>0?C/G*100:0,w=(e,s)=>0===s?e>0?100:0:(e-s)/s*100,O=a&&a.length>0;return(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,l.jsx)(d.i,{title:"Investimento",value:(0,n.xG)(t),icon:(0,l.jsx)(o.Z,{className:"h-4 w-4"}),subtitle:"".concat(s.length," campanhas ativas"),change:O?w(t,y):void 0,compareValue:O?(0,n.xG)(y):void 0}),(0,l.jsx)(d.i,{title:"Receita",value:(0,n.xG)(c),icon:(0,l.jsx)(r.Z,{className:"h-4 w-4"}),subtitle:"ROAS: ".concat(v.toFixed(2)),change:O?w(c,A):void 0,compareValue:O?(0,n.xG)(A):void 0}),(0,l.jsx)(d.i,{title:"Convers\xf5es",value:(0,n.uf)(i),icon:(0,l.jsx)(u.Z,{className:"h-4 w-4"}),subtitle:"CPA: ".concat((0,n.xG)(j)),change:O?w(i,C):void 0,compareValue:O?(0,n.uf)(C):void 0}),(0,l.jsx)(d.i,{title:"Taxa de Convers\xe3o",value:(0,n.rl)(b),icon:(0,l.jsx)(m.Z,{className:"h-4 w-4"}),subtitle:"".concat((0,n.uf)(g)," cliques"),change:O?w(b,E):void 0,compareValue:O?(0,n.rl)(E):void 0}),(0,l.jsx)(d.i,{title:"Cliques",value:(0,n.uf)(g),icon:(0,l.jsx)(p.Z,{className:"h-4 w-4"}),subtitle:"CPC: ".concat((0,n.xG)(f)),change:O?w(g,G):void 0,compareValue:O?(0,n.uf)(G):void 0}),(0,l.jsx)(d.i,{title:"Impress\xf5es",value:(0,n.uf)(h),icon:(0,l.jsx)(x.Z,{className:"h-4 w-4"}),subtitle:"CTR: ".concat((0,n.rl)(N)),change:O?w(h,D):void 0,compareValue:O?(0,n.uf)(D):void 0})]})}var h=a(25230),v=a(18136),j=a(5447),f=a(28748),N=a(63276),b=a(93022),y=a(29202);function A(){var e,s;let{data:a,loading:d,error:n}=function(){let e=(0,c.j)(),[s,a]=(0,t.useState)(null),[l,d]=(0,t.useState)(!0),[n,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async function(){if(!e.startDate||!e.endDate){console.warn("[useGoogleAds] Datas n\xe3o definidas"),d(!1);return}d(!0),o(null);try{let s={selectedHotels:e.selectedHotels,startDate:e.startDate,endDate:e.endDate,selectedCidades:e.selectedCidades,selectedEstados:e.selectedEstados,compareYearAgo:e.compareYearAgo,selectedObjectives:e.selectedObjectives,selectedResultTypes:e.selectedResultTypes};console.log("[useGoogleAds] Buscando dados do Google Ads");let l=await (0,i.U)(s,{platforms:["Google","Google Ads"]});console.log("[useGoogleAds] Dados recebidos:",{campaigns:l.campaigns.length}),a(l)}catch(e){o(e.message||"Erro desconhecido ao buscar dados do Google Ads"),console.error("[useGoogleAds] Erro:",e)}finally{d(!1)}})()},[e.selectedHotels,e.startDate,e.endDate,e.selectedCidades,e.selectedEstados,e.compareYearAgo,e.selectedObjectives,e.selectedResultTypes]),{data:s,loading:l,error:n}}(),o=(0,c.j)(),[r,u]=(0,t.useState)("active"),[m,p]=(0,t.useState)(null),[x,A]=(0,t.useState)(null),[C,G]=(0,t.useState)(!1),[D,E]=(0,t.useState)(!1),w=(0,t.useMemo)(()=>{if(!(null==a?void 0:a.campaigns))return[];if("all"===r)return a.campaigns;let e={active:["ACTIVE","ENABLED"],paused:["PAUSED"]}[r]||[];return a.campaigns.filter(s=>{if(!s.campaign_status)return!1;let a=s.campaign_status.toUpperCase();return e.includes(a)})},[null==a?void 0:a.campaigns,r]),O=async e=>{p(e),G(!0),E(!0);try{let s=await (0,i.v)(e.campaign_id,e.platform,{selectedHotels:o.selectedHotels,startDate:o.startDate,endDate:o.endDate,selectedCidades:o.selectedCidades,selectedEstados:o.selectedEstados,compareYearAgo:o.compareYearAgo,selectedObjectives:o.selectedObjectives,selectedResultTypes:o.selectedResultTypes});A(s)}catch(e){console.error("Erro ao buscar m\xe9tricas do per\xedodo:",e),A(null)}finally{E(!1)}};return d?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(y.Z,{className:"h-8 w-8 text-blue-600"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"Google Ads"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"An\xe1lise detalhada das campanhas do Google Ads"})]})]}),(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,s)=>(0,l.jsx)(b.O,{className:"h-[140px]"},s))}),(0,l.jsx)(b.O,{className:"h-[400px]"}),(0,l.jsx)(b.O,{className:"h-[400px]"})]}):n?(0,l.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center space-y-4",children:[(0,l.jsx)("p",{className:"text-lg font-medium text-red-600",children:"Erro ao carregar dados"}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:n}),(0,l.jsxs)("div",{className:"text-xs text-muted-foreground mt-4 p-4 bg-muted rounded-lg",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Dica:"})," Verifique:"]}),(0,l.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,l.jsx)("li",{children:"Se voc\xea est\xe1 autenticado"}),(0,l.jsx)("li",{children:"Se as datas dos filtros est\xe3o definidas"}),(0,l.jsx)("li",{children:"O console do navegador para mais detalhes"})]})]})]})}):a?(0,l.jsxs)("div",{className:"space-y-10 pb-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(y.Z,{className:"h-8 w-8 text-blue-600"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"Google Ads"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"An\xe1lise detalhada das campanhas do Google Ads"})]})]}),(0,l.jsx)("div",{className:"py-6",children:(0,l.jsx)(g,{campaigns:a.campaigns,comparisonCampaigns:null===(e=a.comparison)||void 0===e?void 0:e.campaigns})}),a.objectiveAnalysis.length>0&&(0,l.jsxs)("div",{className:"py-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"An\xe1lise por Objetivo"}),(0,l.jsx)(N.D,{data:a.objectiveAnalysis})]}),(0,l.jsx)("div",{className:"py-6",children:(0,l.jsx)(v.G,{campaigns:a.campaigns,previousCampaigns:(null===(s=a.comparison)||void 0===s?void 0:s.campaigns)||[],onCampaignClick:O})}),(0,l.jsxs)("div",{className:"py-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Todas as Campanhas"}),(0,l.jsx)(f.a,{value:r,onValueChange:u})]}),(0,l.jsx)(h.j,{campaigns:w,onCampaignClick:O})]}),(0,l.jsx)(j.J,{campaign:m,periodMetrics:x,open:C,onOpenChange:G})]}):null}},29202:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});let l=(0,a(39763).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])}},function(e){e.O(0,[554,189,269,158,389,309,327,709,441,971,117,744],function(){return e(e.s=55295)}),_N_E=e.O()}]);