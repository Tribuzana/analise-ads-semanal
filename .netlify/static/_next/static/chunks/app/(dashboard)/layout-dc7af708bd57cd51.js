(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{56146:function(e,t,a){Promise.resolve().then(a.bind(a,59359)),Promise.resolve().then(a.bind(a,70931)),Promise.resolve().then(a.bind(a,46281)),Promise.resolve().then(a.bind(a,2621))},59359:function(e,t,a){"use strict";a.d(t,{Sidebar:function(){return C}});var s=a(57437),r=a(2265),n=a(27648),l=a(33145),o=a(99376),i=a(47984),d=a(25466),c=a(70525),u=a(29202),m=a(79219),f=a(31047),h=a(94766),x=a(98728),p=a(10407),g=a(92451),y=a(53778);let v=y.zt,b=y.fC,j=y.xz,N=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(y.VY,{ref:t,sideOffset:r,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});N.displayName=y.VY.displayName;var w=a(62869);let z=[{name:"Dashboard",href:"/",icon:d.Z},{name:"Marketing Analytics",href:"/marketing-analytics",icon:c.Z},{name:"Google Ads",href:"/google-ads",icon:u.Z},{name:"Meta Ads",href:"/meta-ads",icon:m.Z},{name:"Reservas",href:"/reservas",icon:f.Z},{name:"Alertas",href:"/alertas",icon:h.Z},{name:"Configura\xe7\xf5es",href:"/configuracoes",icon:x.Z}];function C(){let e=(0,o.usePathname)(),[t,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{{let e=localStorage.getItem("tribuzana_sidebar_collapsed");null!==e&&a(JSON.parse(e))}},[]),(0,r.useEffect)(()=>{localStorage.setItem("tribuzana_sidebar_collapsed",JSON.stringify(t))},[t]),(0,s.jsx)("aside",{className:(0,i.cn)("hidden border-r bg-card lg:block transition-all duration-300",t?"w-16":"w-64"),children:(0,s.jsxs)("div",{className:"flex h-full flex-col",children:[(0,s.jsx)("div",{className:"flex h-16 items-center justify-between border-b px-4",children:t?(0,s.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,s.jsx)(l.default,{src:"/logo-tribuzana.png",alt:"Tribuzana",width:32,height:32,className:"object-contain"})}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.default,{src:"/logo-tribuzana.png",alt:"Tribuzana",width:32,height:32,className:"object-contain"}),(0,s.jsx)("h1",{className:"text-xl font-bold text-primary",children:"Tribuzana"})]})}),(0,s.jsx)("nav",{className:"flex-1 space-y-1 p-4",children:(0,s.jsx)(v,{children:z.map(a=>{let r=e===a.href,l=(0,s.jsxs)(n.default,{href:a.href,className:(0,i.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",t?"justify-center":"",r?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,s.jsx)(a.icon,{className:"h-5 w-5 flex-shrink-0"}),!t&&(0,s.jsx)("span",{children:a.name})]});return t?(0,s.jsxs)(b,{children:[(0,s.jsx)(j,{asChild:!0,children:l}),(0,s.jsx)(N,{side:"right",children:(0,s.jsx)("p",{children:a.name})})]},a.name):(0,s.jsx)("div",{children:l},a.name)})})}),(0,s.jsx)("div",{className:"border-t p-2",children:(0,s.jsx)(w.z,{variant:"ghost",size:"icon",onClick:()=>{a(!t)},className:"w-full",children:t?(0,s.jsx)(p.Z,{className:"h-5 w-5"}):(0,s.jsx)(g.Z,{className:"h-5 w-5"})})})]})})}},70931:function(e,t,a){"use strict";a.d(t,{TopBar:function(){return er}});var s=a(57437),r=a(76362),n=a(2265),l=a(2621),o=a(18307),i=a(62869),d=a(52581),c=a(47984);let u=d.fC,m=d.xz,f=n.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:n=4,...l}=e;return(0,s.jsx)(d.h_,{children:(0,s.jsx)(d.VY,{ref:t,align:r,sideOffset:n,className:(0,c.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});f.displayName=d.VY.displayName;var h=a(77637),x=a(30401);let p=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(h.fC,{ref:t,className:(0,c.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(h.z$,{className:(0,c.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(x.Z,{className:"h-4 w-4"})})})});p.displayName=h.fC.displayName;var g=a(18133),y=a(40875);function v(){let[e,t]=(0,n.useState)(!1),{selectedHotels:a,setSelectedHotels:r}=(0,l.j)(),{hoteis:d,loading:c}=(0,o.q)(),h=e=>{a.includes(e)?r(a.filter(t=>t!==e)):r([...a,e])};return(0,s.jsxs)(u,{open:e,onOpenChange:t,children:[(0,s.jsx)(m,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",className:"w-full justify-between sm:w-[300px]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:0===a.length?"Selecione os hot\xe9is":"".concat(a.length," hotel(is) selecionado(s)")})]}),(0,s.jsx)(y.Z,{className:"ml-2 h-4 w-4 opacity-50"})]})}),(0,s.jsxs)(f,{className:"w-[400px] p-0",align:"start",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b p-3",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Hot\xe9is"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{r(d.map(e=>e.nome_hotel))},className:"h-7 text-xs",children:"Todos"}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{r([])},className:"h-7 text-xs",children:"Limpar"})]})]}),(0,s.jsx)("div",{className:"max-h-[300px] overflow-y-auto p-3",children:c?(0,s.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Carregando..."}):0===d.length?(0,s.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Nenhum hotel encontrado"}):(0,s.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 rounded-md p-2 hover:bg-accent",children:[(0,s.jsx)(p,{id:e.nome_hotel,checked:a.includes(e.nome_hotel),onCheckedChange:()=>h(e.nome_hotel)}),(0,s.jsx)("label",{htmlFor:e.nome_hotel,className:"flex-1 cursor-pointer text-sm font-medium leading-none whitespace-nowrap peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.nome_fantasia||e.nome_hotel})]},e.id))})})]})]})}var b=a(60936),j=a(65399),N=a(34862),w=a(31047),z=a(88501),C=a(49655);function _(e){let{className:t,classNames:a,showOutsideDays:r=!0,numberOfMonths:n=1,...l}=e;return(0,s.jsx)(C._,{showOutsideDays:r,numberOfMonths:n,className:(0,c.cn)("p-0",t),classNames:{months:"flex flex-col space-y-4",month:"space-y-3",caption:"flex justify-center pt-1 relative items-center mb-4",caption_label:"text-base font-semibold text-primary",nav:"space-x-1 flex items-center",nav_button:(0,c.cn)((0,i.d)({variant:"ghost"}),"h-7 w-7 p-0 rounded-md"),nav_button_previous:"absolute left-0",nav_button_next:"absolute right-0",table:"w-full border-collapse",head_row:"flex w-full mb-3",head_cell:"",row:"",cell:"relative focus-within:relative focus-within:z-20",day:(0,c.cn)((0,i.d)({variant:"ghost"}),"h-10 w-10 p-0 font-medium rounded-lg"),day_range_end:"",day_selected:"",day_today:"",day_outside:"",day_disabled:"",day_range_middle:"",day_hidden:"invisible",...a},...l})}_.displayName="Calendar";var S=a(61422);function k(){let{startDate:e,endDate:t,setDateRange:a,compareYearAgo:r,setCompareYearAgo:o}=(0,l.j)(),[d,h]=(0,n.useState)(!1),[x,p]=(0,n.useState)(()=>{if(e&&t)try{return{from:(0,b.D)(e),to:(0,b.D)(t)}}catch(e){}}),[g,y]=(0,n.useState)(r);(0,n.useEffect)(()=>{if(e&&t)try{let a=(0,b.D)(e),s=(0,b.D)(t);isNaN(a.getTime())||isNaN(s.getTime())||p({from:a,to:s})}catch(e){}},[e,t]),(0,n.useEffect)(()=>{y(r)},[r]);let v=e=>{let t;switch(e){case"default":t=(0,S.e6)();break;case"lastWeek":t=(0,S.c8)();break;case"thisMonth":t=(0,S.f)();break;case"lastMonth":t=(0,S.WF)()}p({from:(0,b.D)(t.startDate),to:(0,b.D)(t.endDate)})},C=x||(e&&t?{from:(0,b.D)(e),to:(0,b.D)(t)}:void 0);return(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)(u,{open:d,onOpenChange:h,children:[(0,s.jsx)(m,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",className:(0,c.cn)("w-full justify-start text-left font-normal sm:w-[300px]",!C&&"text-muted-foreground"),children:[(0,s.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),(null==C?void 0:C.from)?C.to?(0,s.jsxs)(s.Fragment,{children:[(0,j.WU)(C.from,"dd/MM/yyyy",{locale:N.F})," -"," ",(0,j.WU)(C.to,"dd/MM/yyyy",{locale:N.F})]}):(0,j.WU)(C.from,"dd/MM/yyyy",{locale:N.F}):(0,s.jsx)("span",{children:"Selecione o per\xedodo"})]})}),(0,s.jsx)(f,{className:"w-auto p-0",align:"start",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-foreground mb-3",children:"Per\xedodos r\xe1pidos"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>v("lastWeek"),className:(0,c.cn)("text-xs h-8 px-3 rounded-md bg-muted/50 hover:bg-muted text-muted-foreground border-muted-foreground/20 font-normal",(null==x?void 0:x.from)&&(null==x?void 0:x.to)&&(0,j.WU)(x.from,"yyyy-MM-dd")===(0,S.c8)().startDate&&(0,j.WU)(x.to,"yyyy-MM-dd")===(0,S.c8)().endDate&&"bg-primary/10 text-primary border-primary/30"),children:"Semana passada"}),(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>v("default"),className:(0,c.cn)("text-xs h-8 px-3 rounded-md bg-muted/50 hover:bg-muted text-muted-foreground border-muted-foreground/20 font-normal",(null==x?void 0:x.from)&&(null==x?void 0:x.to)&&(0,j.WU)(x.from,"yyyy-MM-dd")===(0,S.e6)().startDate&&(0,j.WU)(x.to,"yyyy-MM-dd")===(0,S.e6)().endDate&&"bg-primary/10 text-primary border-primary/30"),children:"\xdaltimos 7 dias"}),(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>v("thisMonth"),className:(0,c.cn)("text-xs h-8 px-3 rounded-md bg-muted/50 hover:bg-muted text-muted-foreground border-muted-foreground/20 font-normal",(null==x?void 0:x.from)&&(null==x?void 0:x.to)&&(0,j.WU)(x.from,"yyyy-MM-dd")===(0,S.f)().startDate&&(0,j.WU)(x.to,"yyyy-MM-dd")===(0,S.f)().endDate&&"bg-primary/10 text-primary border-primary/30"),children:"Este m\xeas"}),(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>v("lastMonth"),className:(0,c.cn)("text-xs h-8 px-3 rounded-md bg-muted/50 hover:bg-muted text-muted-foreground border-muted-foreground/20 font-normal",(null==x?void 0:x.from)&&(null==x?void 0:x.to)&&(0,j.WU)(x.from,"yyyy-MM-dd")===(0,S.WF)().startDate&&(0,j.WU)(x.to,"yyyy-MM-dd")===(0,S.WF)().endDate&&"bg-primary/10 text-primary border-primary/30"),children:"M\xeas passado"})]}),(0,s.jsxs)(i.z,{variant:g?"default":"outline",size:"sm",onClick:()=>y(!g),className:"w-full gap-2 h-9",children:[(0,s.jsx)(z.Z,{className:"h-4 w-4"}),"Comparar com ano anterior"]})]}),(0,s.jsxs)("div",{className:"p-4 border-b",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-foreground mb-3",children:"Per\xedodo personalizado"}),(0,s.jsx)(_,{initialFocus:!0,mode:"range",defaultMonth:null==x?void 0:x.from,selected:x,onSelect:e=>{p(e)},numberOfMonths:1,locale:N.F})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 p-4 border-t bg-muted/30",children:[(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{if(e&&t)try{p({from:(0,b.D)(e),to:(0,b.D)(t)})}catch(e){p(void 0)}y(r),h(!1)},className:"gap-2 bg-background",children:"Cancelar"}),(0,s.jsx)(i.z,{variant:"default",size:"sm",onClick:()=>{(null==x?void 0:x.from)&&(null==x?void 0:x.to)&&(a((0,j.WU)(x.from,"yyyy-MM-dd"),(0,j.WU)(x.to,"yyyy-MM-dd")),o(g),h(!1))},disabled:!(null==x?void 0:x.from)||!(null==x?void 0:x.to),className:"bg-primary hover:bg-primary/90",children:"Aplicar"})]})]})})]})})}var M=a(26815),D=a(83774);function I(){let{hoteis:e}=(0,o.q)(),{selectedCidades:t,setSelectedCidades:a}=(0,l.j)(),[r,d]=(0,n.useState)(!1),h=Array.from(new Set(e.map(e=>e.cidade).filter(e=>null!==e&&""!==e))).sort(),x=e=>{t.includes(e)?a(t.filter(t=>t!==e)):a([...t,e])};return(0,s.jsxs)(u,{open:r,onOpenChange:d,children:[(0,s.jsx)(m,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",size:"sm",className:(0,c.cn)("gap-2",t.length>0&&"bg-primary/10 border-primary"),children:[(0,s.jsx)(D.Z,{className:"h-4 w-4"}),"Cidades",t.length>0&&(0,s.jsx)("span",{className:"ml-1 rounded-full bg-primary px-2 py-0.5 text-xs text-primary-foreground",children:t.length})]})}),(0,s.jsx)(f,{className:"w-64 p-0",align:"start",children:(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(M._,{className:"text-sm font-semibold",children:"Filtrar por Cidade"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Selecione uma ou mais cidades"})]}),(0,s.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===h.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma cidade dispon\xedvel"}):h.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(p,{id:"cidade-".concat(e),checked:t.includes(e),onCheckedChange:()=>x(e)}),(0,s.jsx)(M._,{htmlFor:"cidade-".concat(e),className:"text-sm font-normal cursor-pointer flex-1",children:e})]},e))}),t.length>0&&(0,s.jsx)(i.z,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>a([]),children:"Limpar sele\xe7\xe3o"})]})})]})}function O(){let{hoteis:e}=(0,o.q)(),{selectedEstados:t,setSelectedEstados:a}=(0,l.j)(),[r,d]=(0,n.useState)(!1),h=Array.from(new Set(e.map(e=>e.estado).filter(e=>null!==e&&""!==e))).sort(),x=e=>{t.includes(e)?a(t.filter(t=>t!==e)):a([...t,e])};return(0,s.jsxs)(u,{open:r,onOpenChange:d,children:[(0,s.jsx)(m,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",size:"sm",className:(0,c.cn)("gap-2",t.length>0&&"bg-primary/10 border-primary"),children:[(0,s.jsx)(D.Z,{className:"h-4 w-4"}),"Estados",t.length>0&&(0,s.jsx)("span",{className:"ml-1 rounded-full bg-primary px-2 py-0.5 text-xs text-primary-foreground",children:t.length})]})}),(0,s.jsx)(f,{className:"w-64 p-0",align:"start",children:(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(M._,{className:"text-sm font-semibold",children:"Filtrar por Estado"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Selecione um ou mais estados"})]}),(0,s.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===h.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhum estado dispon\xedvel"}):h.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(p,{id:"estado-".concat(e),checked:t.includes(e),onCheckedChange:()=>x(e)}),(0,s.jsx)(M._,{htmlFor:"estado-".concat(e),className:"text-sm font-normal cursor-pointer flex-1",children:e})]},e))}),t.length>0&&(0,s.jsx)(i.z,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>a([]),children:"Limpar sele\xe7\xe3o"})]})})]})}var E=a(90740);let A=["Vendas","Busca","Performance Max","Engajamento","Leads","Tr\xe1fego","Hotel","Gera\xe7\xe3o de Demanda","Inteligente","V\xeddeo","Cliques em Links","Mensagens"],Z=["Convers\xf5es","Leads","Cliques em Links","Engajamentos em Posts","Compras"];function W(){let[e,t]=(0,n.useState)(!1),{selectedObjectives:a,setSelectedObjectives:r,selectedResultTypes:o,setSelectedResultTypes:d}=(0,l.j)(),c=e=>{a.includes(e)?r(a.filter(t=>t!==e)):r([...a,e])},h=e=>{o.includes(e)?d(o.filter(t=>t!==e)):d([...o,e])},x=a.length+o.length;return(0,s.jsxs)(u,{open:e,onOpenChange:t,children:[(0,s.jsx)(m,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",className:"w-full justify-between sm:w-[200px]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:0===x?"Filtros Avan\xe7ados":"".concat(x," filtro(s) selecionado(s)")})]}),(0,s.jsx)(y.Z,{className:"ml-2 h-4 w-4 opacity-50"})]})}),(0,s.jsxs)(f,{className:"w-[400px] p-0",align:"start",children:[(0,s.jsxs)("div",{className:"border-b",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b p-3",children:[(0,s.jsxs)("span",{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(E.Z,{className:"h-4 w-4"}),"Objetivo de Campanha"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{r(A)},className:"h-7 text-xs",children:"Todos"}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{r([])},className:"h-7 text-xs",children:"Limpar"})]})]}),(0,s.jsx)("div",{className:"max-h-[300px] overflow-y-auto p-3",children:(0,s.jsx)("div",{className:"space-y-2",children:A.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 rounded-md p-2 hover:bg-accent",children:[(0,s.jsx)(p,{id:"objective-".concat(e),checked:a.includes(e),onCheckedChange:()=>c(e)}),(0,s.jsx)("label",{htmlFor:"objective-".concat(e),className:"flex-1 cursor-pointer text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e})]},e))})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b p-3",children:[(0,s.jsxs)("span",{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(E.Z,{className:"h-4 w-4"}),"Tipo de Resultado"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{d(Z)},className:"h-7 text-xs",children:"Todos"}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{d([])},className:"h-7 text-xs",children:"Limpar"})]})]}),(0,s.jsx)("div",{className:"max-h-[300px] overflow-y-auto p-3",children:(0,s.jsx)("div",{className:"space-y-2",children:Z.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 rounded-md p-2 hover:bg-accent",children:[(0,s.jsx)(p,{id:"resultType-".concat(e),checked:o.includes(e),onCheckedChange:()=>h(e)}),(0,s.jsx)("label",{htmlFor:"resultType-".concat(e),className:"flex-1 cursor-pointer text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e})]},e))})})]})]})]})}var F=a(69076);function R(){let{resetFilters:e}=(0,l.j)();return(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border bg-card p-4",children:[(0,s.jsx)(v,{}),(0,s.jsx)(I,{}),(0,s.jsx)(O,{}),(0,s.jsx)(k,{}),(0,s.jsx)(W,{}),(0,s.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:e,className:"gap-2",children:[(0,s.jsx)(F.Z,{className:"h-4 w-4"}),"Limpar filtros"]})]})}var U=a(21256),T=a(35974),J=a(94766),P=a(27648);function L(){let{stats:e,loading:t}=(0,U.Z)();if(t)return null;let a=e.total>0,r=e.critical>0;return(0,s.jsx)(P.default,{href:"/alertas",children:(0,s.jsxs)(i.z,{variant:"ghost",size:"icon",className:"relative",children:[(0,s.jsx)(J.Z,{className:"h-5 w-5"}),a&&(0,s.jsx)(T.C,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs ".concat(r?"bg-red-500":"bg-yellow-500"),children:e.total>99?"99+":e.total})]})})}var Y=a(56661);let V=Y.fC,H=Y.xz;Y.ZA,Y.Uv,Y.Tr,Y.Ee,n.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...l}=e;return(0,s.jsx)(Y.fF,{ref:t,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...l,children:n})}).displayName=Y.fF.displayName,n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Y.tu,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=Y.tu.displayName;let q=n.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(Y.Uv,{children:(0,s.jsx)(Y.VY,{ref:t,sideOffset:r,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});q.displayName=Y.VY.displayName;let X=n.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(Y.ck,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...n})});X.displayName=Y.ck.displayName,n.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...l}=e;return(0,s.jsx)(Y.oC,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...l,children:r})}).displayName=Y.oC.displayName,n.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsx)(Y.Rk,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:r})}).displayName=Y.Rk.displayName;let B=n.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(Y.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})});B.displayName=Y.__.displayName;let G=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Y.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});G.displayName=Y.Z0.displayName;var Q=a(33360);let K=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Q.fC,{ref:t,className:(0,c.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});K.displayName=Q.fC.displayName;let $=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Q.Ee,{ref:t,className:(0,c.cn)("aspect-square h-full w-full",a),...r})});$.displayName=Q.Ee.displayName;let ee=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Q.NY,{ref:t,className:(0,c.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});ee.displayName=Q.NY.displayName;var et=a(47692),ea=a(99376),es=a(14438);function er(){let{usuario:e,signOut:t}=(0,r.a)();(0,ea.useRouter)();let a=async()=>{try{localStorage.removeItem("tribuzana_filters"),localStorage.removeItem("tribuzana_resolved_alerts"),localStorage.removeItem("tribuzana_sidebar_collapsed"),localStorage.removeItem("tribuzana_alert_configs");try{await t()}catch(e){console.warn("[handleSignOut] Erro no signOut do contexto, tentando API:",e);try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){console.error("[handleSignOut] Erro na API de logout:",e)}}es.A.success("Logout realizado com sucesso"),window.location.href="/login"}catch(e){console.error("[handleSignOut] Erro geral:",e),es.A.error("Erro ao fazer logout. Redirecionando..."),localStorage.clear(),sessionStorage.clear(),window.location.href="/login"}};return(0,s.jsxs)("header",{className:"border-b bg-background",children:[(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between px-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(L,{}),(0,s.jsxs)(V,{children:[(0,s.jsx)(H,{asChild:!0,children:(0,s.jsx)(i.z,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,s.jsxs)(K,{children:[(0,s.jsx)($,{src:(null==e?void 0:e.avatar_url)||""}),(0,s.jsx)(ee,{children:e?e.nome_completo.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U"})]})})}),(0,s.jsxs)(q,{align:"end",className:"w-56",children:[(0,s.jsx)(B,{children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:null==e?void 0:e.nome_completo}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:null==e?void 0:e.email}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:null==e?void 0:e.nivel_acesso})]})}),(0,s.jsx)(G,{}),(0,s.jsxs)(X,{onClick:a,children:[(0,s.jsx)(et.Z,{className:"mr-2 h-4 w-4"}),"Sair"]})]})]})]})]}),(0,s.jsx)("div",{className:"px-6 pb-4",children:(0,s.jsx)(R,{})})]})}},35974:function(e,t,a){"use strict";a.d(t,{C:function(){return o}});var s=a(57437);a(2265);var r=a(90535),n=a(47984);let l=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...r})}},62869:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return i}});var s=a(57437),r=a(2265),n=a(90535),l=a(47984);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,...i}=e;return(0,s.jsx)("button",{className:(0,l.cn)(o({variant:r,size:n,className:a})),ref:t,...i})});i.displayName="Button"},26815:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var s=a(57437),r=a(2265),n=a(6394),l=a(90535),o=a(47984);let i=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.f,{ref:t,className:(0,o.cn)(i(),a),...r})});d.displayName=n.f.displayName},46281:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return o},a:function(){return i}});var s=a(57437),r=a(2265),n=a(10970);let l=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,r.useState)(null),[i,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),m=(0,n.e)();(0,r.useEffect)(()=>{m.auth.getSession().then(e=>{var t;let{data:{session:a}}=e;o(null!==(t=null==a?void 0:a.user)&&void 0!==t?t:null),(null==a?void 0:a.user)?f(a.user.id):u(!1)});let{data:{subscription:e}}=m.auth.onAuthStateChange((e,t)=>{var a;o(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),(null==t?void 0:t.user)?f(t.user.id):(d(null),u(!1))});return()=>{e.unsubscribe()}},[]);let f=async e=>{try{let{data:t,error:a}=await m.from("usuarios").select("*").eq("id",e).eq("ativo",!0).single();if(a)throw a;d(t)}catch(e){console.error("Erro ao buscar usu\xe1rio:",e),d(null)}finally{u(!1)}},h=async(e,t)=>{let{error:a}=await m.auth.signInWithPassword({email:e,password:t});if(a)throw a},x=async()=>{try{localStorage.removeItem("tribuzana_filters"),localStorage.removeItem("tribuzana_resolved_alerts"),localStorage.removeItem("tribuzana_sidebar_collapsed");let{error:e}=await m.auth.signOut();if(e)throw console.error("[signOut] Erro do Supabase:",e),o(null),d(null),e;o(null),d(null)}catch(e){throw console.error("[signOut] Erro ao fazer logout:",e),o(null),d(null),e}};return(0,s.jsx)(l.Provider,{value:{user:a,usuario:i,loading:c,signIn:h,signOut:x},children:t})}let i=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2621:function(e,t,a){"use strict";a.d(t,{FilterProvider:function(){return o},j:function(){return i}});var s=a(57437),r=a(2265),n=a(61422);let l=(0,r.createContext)(void 0);function o(e){let{children:t}=e,{startDate:a,endDate:o}=(0,n.e6)(),[i,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(a),[m,f]=(0,r.useState)(o),[h,x]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[b,j]=(0,r.useState)([]),[N,w]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=localStorage.getItem("tribuzana_filters");if(e)try{let t=JSON.parse(e);t.selectedHotels&&d(t.selectedHotels),t.startDate&&u(t.startDate),t.endDate&&f(t.endDate),t.selectedCidades&&x(t.selectedCidades),t.selectedEstados&&g(t.selectedEstados),void 0!==t.compareYearAgo&&v(t.compareYearAgo)}catch(e){console.error("Erro ao carregar filtros salvos:",e)}},[]),(0,r.useEffect)(()=>{c&&m&&localStorage.setItem("tribuzana_filters",JSON.stringify({selectedHotels:i,startDate:c,endDate:m,selectedCidades:h,selectedEstados:p,compareYearAgo:y,selectedObjectives:b,selectedResultTypes:N}))},[i,c,m,h,p,y,b,N]),(0,s.jsx)(l.Provider,{value:{selectedHotels:i,startDate:c,endDate:m,selectedCidades:h,selectedEstados:p,compareYearAgo:y,selectedObjectives:b,selectedResultTypes:N,setSelectedHotels:d,setDateRange:(e,t)=>{u(e),f(t)},setSelectedCidades:x,setSelectedEstados:g,setCompareYearAgo:v,setSelectedObjectives:j,setSelectedResultTypes:w,resetFilters:()=>{d([]);let{startDate:e,endDate:t}=(0,n.e6)();u(e),f(t),x([]),g([]),v(!1),j([]),w([])}},children:t})}let i=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useFilterContext must be used within a FilterProvider");return e}},21256:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(2265),r=a(2621);a(83079);var n=(0,a(12119).$)("4fb7291308caa69a64f14ea764e4da7ccd3eddaa");function l(){let e=(0,r.j)(),[t,a]=(0,s.useState)([]),[l,i]=(0,s.useState)(!0),[d,c]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){i(!0),c(null);try{let t={selectedHotels:e.selectedHotels,startDate:e.startDate,endDate:e.endDate,selectedCidades:e.selectedCidades,selectedEstados:e.selectedEstados,compareYearAgo:e.compareYearAgo,selectedObjectives:e.selectedObjectives,selectedResultTypes:e.selectedResultTypes},s=await n(t),r=o(),l=s.filter(e=>!r.includes(e.id));a(l)}catch(e){c(e.message),console.error("[useAlertas] Erro ao buscar alertas:",e)}finally{i(!1)}}()},[e.selectedHotels,e.startDate,e.endDate,e.selectedCidades,e.selectedEstados,e.compareYearAgo,e.selectedObjectives,e.selectedResultTypes]);let u={total:t.length,critical:t.filter(e=>"critical"===e.severity).length,warning:t.filter(e=>"warning"===e.severity).length,info:t.filter(e=>"info"===e.severity).length};return{alerts:t,loading:l,error:d,stats:u,resolveAlert:e=>{let s=o();s.includes(e)||(s.push(e),localStorage.setItem("tribuzana_resolved_alerts",JSON.stringify(s)),a(t.filter(t=>t.id!==e)))}}}function o(){try{let e=localStorage.getItem("tribuzana_resolved_alerts");return e?JSON.parse(e):[]}catch(e){return[]}}},76362:function(e,t,a){"use strict";a.d(t,{a:function(){return s}});let s=a(46281).a},18307:function(e,t,a){"use strict";a.d(t,{q:function(){return n}});var s=a(2265),r=a(10970);function n(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async function(){try{let e=(0,r.e)(),{data:a,error:s}=await e.from("hoteis_config").select("id, nome_hotel, nome_fantasia, cidade, estado, ativo").eq("ativo",!0).order("nome_hotel");if(s)throw console.error("[useHoteis] Erro do Supabase:",s),s;t(a||[]),o(null)}catch(t){let e=(null==t?void 0:t.message)||"Erro desconhecido ao buscar hot\xe9is";o(e),console.error("[useHoteis] Erro ao buscar hot\xe9is:",{message:e,error:t})}finally{n(!1)}})()},[]),{hoteis:e,loading:a,error:l}}},10970:function(e,t,a){"use strict";a.d(t,{e:function(){return i}});var s=a(11259);let r="__supabase_browser_client__",n=new Map;async function l(e,t,a){let s;let r=n.get(e);r&&await r;let l=new Promise(e=>{s=e});n.set(e,l);try{return await a()}finally{s(),n.delete(e)}}let o=(()=>{if(globalThis[r])return globalThis[r];let e="https://hatciwhpzmyidatpiezk.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhhdGNpd2hwem15aWRhdHBpZXprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNDczMDAsImV4cCI6MjA3NTYyMzMwMH0.4gHLRQPAsh08ECaLUxMdSHIvegOXcAv4a_WMFmrJ_qU";return e&&t?(globalThis[r]=(0,s.createBrowserClient)(e,t,{auth:{lock:l}}),globalThis[r]):(console.error("[Supabase Client] Vari\xe1veis de ambiente n\xe3o definidas:",{url:e?"OK":"FALTANDO",key:t?"OK":"FALTANDO"}),null)})(),i=()=>{if(!o){let e="https://hatciwhpzmyidatpiezk.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhhdGNpd2hwem15aWRhdHBpZXprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNDczMDAsImV4cCI6MjA3NTYyMzMwMH0.4gHLRQPAsh08ECaLUxMdSHIvegOXcAv4a_WMFmrJ_qU";if(!e||!t)throw Error("Vari\xe1veis de ambiente do Supabase n\xe3o est\xe3o configuradas. Verifique o arquivo .env.local");return(0,s.createBrowserClient)(e,t,{auth:{lock:l}})}return o}},47984:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(61994),r=a(53335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}},61422:function(e,t,a){"use strict";a.d(t,{WF:function(){return f},c8:function(){return u},e6:function(){return c},f:function(){return m}});var s=a(64975),r=a(65399),n=a(65696),l=a(86035),o=a(63070),i=a(945),d=a(27742);let c=()=>{let e=new Date,t=(0,s.k)(e,1),a=(0,s.k)(t,6);return{startDate:(0,r.WU)(a,"yyyy-MM-dd"),endDate:(0,r.WU)(t,"yyyy-MM-dd")}},u=()=>{let e=new Date,t=(0,n.z)((0,s.k)(e,7),{weekStartsOn:0}),a=(0,l.v)((0,s.k)(e,7),{weekStartsOn:0});return{startDate:(0,r.WU)(t,"yyyy-MM-dd"),endDate:(0,r.WU)(a,"yyyy-MM-dd")}},m=()=>{let e=new Date,t=(0,s.k)(e,1),a=(0,o.N)(e);return{startDate:(0,r.WU)(a,"yyyy-MM-dd"),endDate:(0,r.WU)(t,"yyyy-MM-dd")}},f=()=>{let e=(0,i.W)(new Date,1),t=(0,o.N)(e),a=(0,d.V)(e);return{startDate:(0,r.WU)(t,"yyyy-MM-dd"),endDate:(0,r.WU)(a,"yyyy-MM-dd")}}}},function(e){e.O(0,[554,434,259,189,438,269,389,357,819,192,971,117,744],function(){return e(e.s=56146)}),_N_E=e.O()}]);