(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{39455:function(e,s,t){Promise.resolve().then(t.bind(t,93295))},93295:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var n=t(57437),a=t(39596),l=t(83348),c=t(50754),i=t(58896),r=t(95252),d=t(70525),o=t(16275);function u(e){var s;let{data:t}=e,a=t.campaigns.reduce((e,s)=>e+s.spend,0),u=t.campaigns.reduce((e,s)=>e+s.revenue,0),m=t.campaigns.reduce((e,s)=>e+s.conversions,0),x=a>0?u/a:0,h=m>0?a/m:0,p=t.campaigns.reduce((e,s)=>e+s.clicks,0),f=p>0?a/p:0,j=(null===(s=t.comparison)||void 0===s?void 0:s.campaigns)||[],g=j.reduce((e,s)=>e+s.spend,0),v=j.reduce((e,s)=>e+s.revenue,0),N=j.reduce((e,s)=>e+s.conversions,0),y=g>0?v/g:0,b=N>0?g/N:0,k=j.reduce((e,s)=>e+s.clicks,0),w=k>0?g/k:0,A=(e,s)=>0===s?e>0?100:0:(e-s)/s*100,C=t.comparison&&j.length>0;return(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,n.jsx)(l.i,{title:"Total de Campanhas",value:t.campaigns.length,icon:(0,n.jsx)(i.Z,{className:"h-4 w-4"}),change:C?A(t.campaigns.length,j.length):void 0,compareValue:C?j.length:void 0}),(0,n.jsx)(l.i,{title:"Investimento Total",value:(0,c.xG)(a),icon:(0,n.jsx)(r.Z,{className:"h-4 w-4"}),change:C?A(a,g):void 0,compareValue:C?(0,c.xG)(g):void 0}),(0,n.jsx)(l.i,{title:"Receita Total",value:(0,c.xG)(u),icon:(0,n.jsx)(d.Z,{className:"h-4 w-4"}),change:C?A(u,v):void 0,compareValue:C?(0,c.xG)(v):void 0}),(0,n.jsx)(l.i,{title:"ROAS M\xe9dio",value:x.toFixed(2),icon:(0,n.jsx)(d.Z,{className:"h-4 w-4"}),change:C?A(x,y):void 0,compareValue:C?y.toFixed(2):void 0}),(0,n.jsx)(l.i,{title:"CPA M\xe9dio",value:(0,c.xG)(h),icon:(0,n.jsx)(r.Z,{className:"h-4 w-4"}),change:C?A(h,b):void 0,compareValue:C?(0,c.xG)(b):void 0}),(0,n.jsx)(l.i,{title:"CPC M\xe9dio",value:(0,c.xG)(f),icon:(0,n.jsx)(r.Z,{className:"h-4 w-4"}),change:C?A(f,w):void 0,compareValue:C?(0,c.xG)(w):void 0}),(0,n.jsx)(l.i,{title:"Total de Convers\xf5es",value:(0,c.uf)(m),icon:(0,n.jsx)(o.Z,{className:"h-4 w-4"}),change:C?A(m,N):void 0,compareValue:C?(0,c.uf)(N):void 0})]})}var m=t(73578),x=t(35974);function h(e){let{campaigns:s}=e,t=e=>"Google Ads"===e||"Google"===e?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";return(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(m.iA,{children:[(0,n.jsx)(m.Rn,{children:"Top 10 campanhas por ROAS"}),(0,n.jsx)(m.xD,{children:(0,n.jsxs)(m.SC,{children:[(0,n.jsx)(m.ss,{children:"Campanha"}),(0,n.jsx)(m.ss,{children:"Plataforma"}),(0,n.jsx)(m.ss,{children:"Cliente"}),(0,n.jsx)(m.ss,{className:"text-right",children:"Investimento"}),(0,n.jsx)(m.ss,{className:"text-right",children:"Receita"}),(0,n.jsx)(m.ss,{className:"text-right",children:"ROAS"}),(0,n.jsx)(m.ss,{className:"text-right",children:"Convers\xf5es"}),(0,n.jsx)(m.ss,{className:"text-right",children:"CPA"})]})}),(0,n.jsx)(m.RM,{children:0===s.length?(0,n.jsx)(m.SC,{children:(0,n.jsx)(m.pj,{colSpan:8,className:"text-center text-muted-foreground",children:"Nenhuma campanha encontrada"})}):s.map(e=>(0,n.jsxs)(m.SC,{children:[(0,n.jsx)(m.pj,{className:"font-medium max-w-[300px] truncate",children:e.campaign_name||"Sem nome"}),(0,n.jsx)(m.pj,{children:(0,n.jsx)(x.C,{variant:"secondary",className:t(e.platform),children:"Google"===e.platform?"Google Ads":"Meta"===e.platform?"Meta Ads":e.platform})}),(0,n.jsx)(m.pj,{children:e.client}),(0,n.jsx)(m.pj,{className:"text-right",children:(0,c.xG)(e.spend)}),(0,n.jsx)(m.pj,{className:"text-right",children:(0,c.xG)(e.revenue)}),(0,n.jsx)(m.pj,{className:"text-right font-bold",children:e.roas.toFixed(2)}),(0,n.jsx)(m.pj,{className:"text-right",children:(0,c.uf)(e.conversions)}),(0,n.jsx)(m.pj,{className:"text-right",children:(0,c.xG)(e.cpa)})]},"".concat(e.campaign_id,"_").concat(e.platform)))})]})})}var p=t(18136),f=t(63276),j=t(66070);function g(e){let{campaigns:s}=e,t=s.filter(e=>"Google Ads"===e.platform||"Google"===e.platform),a=s.filter(e=>"Meta Ads"===e.platform||"Meta"===e.platform),l=t.reduce((e,s)=>e+s.spend,0),i=a.reduce((e,s)=>e+s.spend,0),r=t.reduce((e,s)=>e+s.revenue,0),d=a.reduce((e,s)=>e+s.revenue,0),o=t.reduce((e,s)=>e+s.conversions,0),u=a.reduce((e,s)=>e+s.conversions,0),m=l>0?r/l:0,x=i>0?d/i:0,h=l+i;return(0,n.jsxs)(j.Zb,{children:[(0,n.jsx)(j.Ol,{children:(0,n.jsx)(j.ll,{children:"Compara\xe7\xe3o entre Plataformas"})}),(0,n.jsxs)(j.aY,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"Google Ads"}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[t.length," campanhas"]})]}),(0,n.jsx)("div",{className:"h-4 w-full rounded-full bg-secondary/20",children:(0,n.jsx)("div",{className:"h-4 rounded-full bg-blue-500",style:{width:"".concat(h>0?l/h*100:0,"%")}})}),(0,n.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Investimento"}),(0,n.jsx)("p",{className:"font-semibold",children:(0,c.xG)(l)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Receita"}),(0,n.jsx)("p",{className:"font-semibold",children:(0,c.xG)(r)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"ROAS"}),(0,n.jsx)("p",{className:"font-semibold",children:m.toFixed(2)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Convers\xf5es"}),(0,n.jsx)("p",{className:"font-semibold",children:(0,c.uf)(o)})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"Meta Ads"}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[a.length," campanhas"]})]}),(0,n.jsx)("div",{className:"h-4 w-full rounded-full bg-secondary/20",children:(0,n.jsx)("div",{className:"h-4 rounded-full bg-purple-500",style:{width:"".concat(h>0?i/h*100:0,"%")}})}),(0,n.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Investimento"}),(0,n.jsx)("p",{className:"font-semibold",children:(0,c.xG)(i)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Receita"}),(0,n.jsx)("p",{className:"font-semibold",children:(0,c.xG)(d)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"ROAS"}),(0,n.jsx)("p",{className:"font-semibold",children:x.toFixed(2)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Convers\xf5es"}),(0,n.jsx)("p",{className:"font-semibold",children:(0,c.uf)(u)})]})]})]})]})]})}var v=t(93022);function N(){var e;let{data:s,loading:t,error:l}=(0,a.j)();return t?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Marketing Analytics"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"An\xe1lise consolidada de todas as plataformas de an\xfancios"})]}),(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(7)].map((e,s)=>(0,n.jsx)(v.O,{className:"h-[140px]"},s))}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,n.jsx)(v.O,{className:"h-[400px]"}),(0,n.jsx)(v.O,{className:"h-[400px]"})]}),(0,n.jsx)(v.O,{className:"h-[400px]"})]}):l?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center space-y-4",children:[(0,n.jsx)("p",{className:"text-lg font-medium text-red-600",children:"Erro ao carregar dados"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:l}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground mt-4 p-4 bg-muted rounded-lg",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Dica:"})," Verifique:"]}),(0,n.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,n.jsx)("li",{children:"Se voc\xea est\xe1 autenticado"}),(0,n.jsx)("li",{children:"Se as datas dos filtros est\xe3o definidas"}),(0,n.jsx)("li",{children:"O console do navegador para mais detalhes"})]})]})]})}):s?(0,n.jsxs)("div",{className:"space-y-10 pb-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Marketing Analytics"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"An\xe1lise consolidada de todas as plataformas de an\xfancios"})]}),(0,n.jsx)("div",{className:"py-6",children:(0,n.jsx)(u,{data:s})}),(0,n.jsx)("div",{className:"py-6",children:(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,n.jsx)(f.D,{data:s.objectiveAnalysis}),(0,n.jsx)(g,{campaigns:s.campaigns})]})}),(0,n.jsxs)("div",{className:"py-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Top Campanhas"}),(0,n.jsx)(h,{campaigns:s.topCampaigns})]}),(0,n.jsx)("div",{className:"py-6",children:(0,n.jsx)(p.G,{campaigns:s.campaigns,previousCampaigns:(null===(e=s.comparison)||void 0===e?void 0:e.campaigns)||[]})})]}):null}},39596:function(e,s,t){"use strict";t.d(s,{j:function(){return c}});var n=t(2265),a=t(2621),l=t(58508);function c(e){var s,t,c,i;let r=(0,a.j)(),[d,o]=(0,n.useState)(null),[u,m]=(0,n.useState)(!0),[x,h]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async function(){if(!r.startDate||!r.endDate){console.warn("[useMarketingAnalytics] Datas n\xe3o definidas"),m(!1);return}m(!0),h(null);try{let s={selectedHotels:r.selectedHotels,startDate:r.startDate,endDate:r.endDate,selectedCidades:r.selectedCidades,selectedEstados:r.selectedEstados,compareYearAgo:r.compareYearAgo,selectedObjectives:r.selectedObjectives,selectedResultTypes:r.selectedResultTypes};console.log("[useMarketingAnalytics] Buscando analytics com filtros:",{startDate:s.startDate,endDate:s.endDate,selectedHotels:s.selectedHotels.length});let t=await (0,l.U)(s,e);console.log("[useMarketingAnalytics] Dados recebidos:",{campaigns:t.campaigns.length,objectives:t.objectiveAnalysis.length,temporal:t.temporalData.length}),o(t)}catch(e){h(e.message||"Erro desconhecido ao buscar analytics"),console.error("[useMarketingAnalytics] Erro:",e)}finally{m(!1)}})()},[r.selectedHotels,r.startDate,r.endDate,r.selectedCidades,r.selectedEstados,r.compareYearAgo,r.selectedObjectives,r.selectedResultTypes,null==e?void 0:null===(s=e.platforms)||void 0===s?void 0:s.join(","),null==e?void 0:null===(t=e.objectives)||void 0===t?void 0:t.join(","),null==e?void 0:null===(c=e.statuses)||void 0===c?void 0:c.join(","),null==e?void 0:null===(i=e.resultTypes)||void 0===i?void 0:i.join(",")]),{data:d,loading:u,error:x}}},15051:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},28842:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},20265:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},95252:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},21047:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},16275:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},58896:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},70525:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},6741:function(e,s,t){"use strict";function n(e,s,{checkForDefaultPrevented:t=!0}={}){return function(n){if(e?.(n),!1===t||!n.defaultPrevented)return s?.(n)}}t.d(s,{Mj:function(){return n}}),"undefined"!=typeof window&&window.document&&window.document.createElement},98575:function(e,s,t){"use strict";t.d(s,{F:function(){return l},e:function(){return c}});var n=t(2265);function a(e,s){if("function"==typeof e)return e(s);null!=e&&(e.current=s)}function l(...e){return s=>{let t=!1,n=e.map(e=>{let n=a(e,s);return t||"function"!=typeof n||(t=!0),n});if(t)return()=>{for(let s=0;s<n.length;s++){let t=n[s];"function"==typeof t?t():a(e[s],null)}}}}function c(...e){return n.useCallback(l(...e),e)}},80886:function(e,s,t){"use strict";t.d(s,{T:function(){return i}});var n,a=t(2265),l=t(61188),c=(n||(n=t.t(a,2)))[" useInsertionEffect ".trim().toString()]||l.b;function i({prop:e,defaultProp:s,onChange:t=()=>{},caller:n}){let[l,i,r]=function({defaultProp:e,onChange:s}){let[t,n]=a.useState(e),l=a.useRef(t),i=a.useRef(s);return c(()=>{i.current=s},[s]),a.useEffect(()=>{l.current!==t&&(i.current?.(t),l.current=t)},[t,l]),[t,n,i]}({defaultProp:s,onChange:t}),d=void 0!==e,o=d?e:l;{let s=a.useRef(void 0!==e);a.useEffect(()=>{let e=s.current;if(e!==d){let s=d?"controlled":"uncontrolled";console.warn(`${n} is changing from ${e?"controlled":"uncontrolled"} to ${s}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}s.current=d},[d,n])}return[o,a.useCallback(s=>{if(d){let t="function"==typeof s?s(e):s;t!==e&&r.current?.(t)}else i(s)},[d,e,i,r])]}Symbol("RADIX:SYNC_STATE")},61188:function(e,s,t){"use strict";t.d(s,{b:function(){return a}});var n=t(2265),a=globalThis?.document?n.useLayoutEffect:()=>{}}},function(e){e.O(0,[554,189,158,709,971,117,744],function(){return e(e.s=39455)}),_N_E=e.O()}]);