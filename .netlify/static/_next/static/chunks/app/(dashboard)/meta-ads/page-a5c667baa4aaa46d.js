(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{10290:function(e,s,a){Promise.resolve().then(a.bind(a,46117))},46117:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return C}});var t=a(57437),l=a(2265),c=a(2621),i=a(58508),d=a(83348),n=a(50754),o=a(95252),r=a(70525),u=a(16275),m=a(58896),p=a(28921),x=a(42208);function v(e){let{campaigns:s,comparisonCampaigns:a}=e,l=s.reduce((e,s)=>e+s.spend,0),c=s.reduce((e,s)=>e+s.revenue,0),i=s.reduce((e,s)=>e+s.conversions,0),v=s.reduce((e,s)=>e+s.clicks,0),h=s.reduce((e,s)=>e+s.impressions,0),j=l>0?c/l:0,g=i>0?l/i:0,f=v>0?l/v:0,N=h>0?v/h*100:0,b=v>0?i/v*100:0,A=(null==a?void 0:a.reduce((e,s)=>e+s.spend,0))||0,C=(null==a?void 0:a.reduce((e,s)=>e+s.revenue,0))||0,y=(null==a?void 0:a.reduce((e,s)=>e+s.conversions,0))||0,D=(null==a?void 0:a.reduce((e,s)=>e+s.clicks,0))||0,E=(null==a?void 0:a.reduce((e,s)=>e+s.impressions,0))||0,O=A>0?C/A:0,w=y>0?A/y:0,M=D>0?y/D*100:0,S=(e,s)=>0===s?e>0?100:0:(e-s)/s*100,k=a&&a.length>0;return(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(d.i,{title:"Investimento",value:(0,n.xG)(l),icon:(0,t.jsx)(o.Z,{className:"h-4 w-4"}),subtitle:"".concat(s.length," campanhas ativas"),change:k?S(l,A):void 0,compareValue:k?(0,n.xG)(A):void 0}),(0,t.jsx)(d.i,{title:"Receita",value:(0,n.xG)(c),icon:(0,t.jsx)(r.Z,{className:"h-4 w-4"}),subtitle:"ROAS: ".concat(j.toFixed(2)),change:k?S(c,C):void 0,compareValue:k?(0,n.xG)(C):void 0}),(0,t.jsx)(d.i,{title:"Convers\xf5es",value:(0,n.uf)(i),icon:(0,t.jsx)(u.Z,{className:"h-4 w-4"}),subtitle:"CPA: ".concat((0,n.xG)(g)),change:k?S(i,y):void 0,compareValue:k?(0,n.uf)(y):void 0}),(0,t.jsx)(d.i,{title:"Taxa de Convers\xe3o",value:(0,n.rl)(b),icon:(0,t.jsx)(m.Z,{className:"h-4 w-4"}),subtitle:"".concat((0,n.uf)(v)," cliques"),change:k?S(b,M):void 0,compareValue:k?(0,n.rl)(M):void 0}),(0,t.jsx)(d.i,{title:"Cliques",value:(0,n.uf)(v),icon:(0,t.jsx)(p.Z,{className:"h-4 w-4"}),subtitle:"CPC: ".concat((0,n.xG)(f)),change:k?S(v,D):void 0,compareValue:k?(0,n.uf)(D):void 0}),(0,t.jsx)(d.i,{title:"Impress\xf5es",value:(0,n.uf)(h),icon:(0,t.jsx)(x.Z,{className:"h-4 w-4"}),subtitle:"CTR: ".concat((0,n.rl)(N)),change:k?S(h,E):void 0,compareValue:k?(0,n.uf)(E):void 0}),(0,t.jsx)(d.i,{title:"ROAS",value:j.toFixed(2),change:k?S(j,O):void 0,compareValue:k?O.toFixed(2):void 0}),(0,t.jsx)(d.i,{title:"CPA",value:(0,n.xG)(g),change:k?S(g,w):void 0,compareValue:k?(0,n.xG)(w):void 0})]})}var h=a(25230),j=a(18136),g=a(5447),f=a(28748),N=a(63276),b=a(93022),A=a(79219);function C(){var e,s;let{data:a,loading:d,error:n}=function(){let e=(0,c.j)(),[s,a]=(0,l.useState)(null),[t,d]=(0,l.useState)(!0),[n,o]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){if(!e.startDate||!e.endDate){console.warn("[useMetaAds] Datas n\xe3o definidas"),d(!1);return}d(!0),o(null);try{let s={selectedHotels:e.selectedHotels,startDate:e.startDate,endDate:e.endDate,selectedCidades:e.selectedCidades,selectedEstados:e.selectedEstados,compareYearAgo:e.compareYearAgo,selectedObjectives:e.selectedObjectives,selectedResultTypes:e.selectedResultTypes};console.log("[useMetaAds] Buscando dados do Meta Ads");let t=await (0,i.U)(s,{platforms:["Meta","Meta Ads"]});console.log("[useMetaAds] Dados recebidos:",{campaigns:t.campaigns.length}),a(t)}catch(e){o(e.message||"Erro desconhecido ao buscar dados do Meta Ads"),console.error("[useMetaAds] Erro:",e)}finally{d(!1)}})()},[e.selectedHotels,e.startDate,e.endDate,e.selectedCidades,e.selectedEstados,e.compareYearAgo,e.selectedObjectives,e.selectedResultTypes]),{data:s,loading:t,error:n}}(),o=(0,c.j)(),[r,u]=(0,l.useState)("active"),[m,p]=(0,l.useState)(null),[x,C]=(0,l.useState)(null),[y,D]=(0,l.useState)(!1),[E,O]=(0,l.useState)(!1),w=(0,l.useMemo)(()=>{if(!(null==a?void 0:a.campaigns))return[];if("all"===r)return a.campaigns;let e={active:["ACTIVE","ENABLED"],paused:["PAUSED"]}[r]||[];return a.campaigns.filter(s=>{if(!s.campaign_status)return!1;let a=s.campaign_status.toUpperCase();return e.includes(a)})},[null==a?void 0:a.campaigns,r]),M=async e=>{p(e),D(!0),O(!0);try{let s=await (0,i.v)(e.campaign_id,e.platform,{selectedHotels:o.selectedHotels,startDate:o.startDate,endDate:o.endDate,selectedCidades:o.selectedCidades,selectedEstados:o.selectedEstados,compareYearAgo:o.compareYearAgo,selectedObjectives:o.selectedObjectives,selectedResultTypes:o.selectedResultTypes});C(s)}catch(e){console.error("Erro ao buscar m\xe9tricas do per\xedodo:",e),C(null)}finally{O(!1)}};return d?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(A.Z,{className:"h-8 w-8 text-purple-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Meta Ads"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"An\xe1lise detalhada das campanhas do Facebook e Instagram"})]})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(8)].map((e,s)=>(0,t.jsx)(b.O,{className:"h-[140px]"},s))}),(0,t.jsx)(b.O,{className:"h-[400px]"}),(0,t.jsx)(b.O,{className:"h-[400px]"})]}):n?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-red-600",children:"Erro ao carregar dados"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:n}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-4 p-4 bg-muted rounded-lg",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Dica:"})," Verifique:"]}),(0,t.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,t.jsx)("li",{children:"Se voc\xea est\xe1 autenticado"}),(0,t.jsx)("li",{children:"Se as datas dos filtros est\xe3o definidas"}),(0,t.jsx)("li",{children:"O console do navegador para mais detalhes"})]})]})]})}):a?(0,t.jsxs)("div",{className:"space-y-10 pb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(A.Z,{className:"h-8 w-8 text-purple-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Meta Ads"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"An\xe1lise detalhada das campanhas do Facebook e Instagram"})]})]}),(0,t.jsx)("div",{className:"py-6",children:(0,t.jsx)(v,{campaigns:a.campaigns,comparisonCampaigns:null===(e=a.comparison)||void 0===e?void 0:e.campaigns})}),a.objectiveAnalysis.length>0&&(0,t.jsxs)("div",{className:"py-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"An\xe1lise por Objetivo"}),(0,t.jsx)(N.D,{data:a.objectiveAnalysis})]}),(0,t.jsx)("div",{className:"py-6",children:(0,t.jsx)(j.G,{campaigns:a.campaigns,previousCampaigns:(null===(s=a.comparison)||void 0===s?void 0:s.campaigns)||[],onCampaignClick:M})}),(0,t.jsxs)("div",{className:"py-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Todas as Campanhas"}),(0,t.jsx)(f.a,{value:r,onValueChange:u})]}),(0,t.jsx)(h.j,{campaigns:w,onCampaignClick:M})]}),(0,t.jsx)(g.J,{campaign:m,periodMetrics:x,open:y,onOpenChange:D})]}):null}},79219:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(39763).Z)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])}},function(e){e.O(0,[554,189,269,158,389,309,327,709,441,971,117,744],function(){return e(e.s=10290)}),_N_E=e.O()}]);