(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{59029:function(e,t,s){Promise.resolve().then(s.bind(s,43113))},43113:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(57437),a=s(2265),n=s(2621);s(83079);var l=(0,s(12119).$)("2cc92c78c3ec07f0212e452407dfc71afa368fb5"),i=s(66070),d=s(93022),o=s(45136),c=s(49162),u=s(97304),x=s(50754),f=s(31047),m=s(70525);function h(){let{data:e,loading:t,error:s}=function(){let e=(0,n.j)(),[t,s]=(0,a.useState)(null),[r,i]=(0,a.useState)(!0),[d,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async function(){if(!e.startDate||!e.endDate){i(!1);return}i(!0),o(null);try{let t={selectedHotels:e.selectedHotels,startDate:e.startDate,endDate:e.endDate,selectedCidades:e.selectedCidades,selectedEstados:e.selectedEstados,compareYearAgo:e.compareYearAgo,selectedObjectives:e.selectedObjectives,selectedResultTypes:e.selectedResultTypes},r=await l(t);s(r)}catch(e){o(e.message),console.error("[useReservas] Erro:",e)}finally{i(!1)}})()},[e.startDate,e.endDate,e.selectedHotels,e.selectedCidades,e.selectedEstados,e.compareYearAgo,e.selectedObjectives,e.selectedResultTypes]),{data:t,loading:r,error:d}}();return t?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"An\xe1lise de Reservas"}),(0,r.jsx)(d.O,{className:"h-[400px]"})]}):s?(0,r.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-lg font-medium text-red-600",children:"Erro ao carregar dados"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:s})]})}):e?(0,r.jsxs)("div",{className:"space-y-10 pb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"An\xe1lise de Reservas"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"An\xe1lise de buscas e padr\xf5es de reservas"})]}),(0,r.jsx)("div",{className:"py-6",children:(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Total de Buscas"}),(0,r.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:(0,x.uf)(e.totalBuscas)})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Anteced\xeancia M\xe9dia"}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[e.antecedenciaMedia," dias"]})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Dura\xe7\xe3o M\xe9dia"}),(0,r.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[e.duracaoMedia," dias"]})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Buscas por Dia"}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:e.totalBuscas>0&&e.porDia.length>0?Math.round(e.totalBuscas/e.porDia.length):0})})]})]})}),e.porDia.length>0&&(0,r.jsx)("div",{className:"py-6",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Buscas ao Longo do Tempo"}),(0,r.jsx)(i.SZ,{children:"Volume de buscas por dia no per\xedodo selecionado"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)(o.w,{data:e.porDia.map(e=>({date:new Date(e.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),Buscas:e.count})),dataKeys:[{key:"Buscas",name:"Buscas",color:"hsl(var(--primary))"}]})})]})}),(0,r.jsx)("div",{className:"py-6",children:(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[e.porDispositivo.length>0&&(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Buscas por Dispositivo"}),(0,r.jsx)(i.SZ,{children:"Distribui\xe7\xe3o de buscas por tipo de dispositivo"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)(c.u,{data:e.porDispositivo.map(e=>({name:"mobile"===e.dispositivo?"Mobile":"desktop"===e.dispositivo?"Desktop":"tablet"===e.dispositivo?"Tablet":e.dispositivo,value:e.count}))})})]}),e.porDispositivo.length>0&&(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Top Dispositivos"}),(0,r.jsx)(i.SZ,{children:"Dispositivos mais utilizados para buscas"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)(u.v,{data:e.porDispositivo.slice(0,5).map(e=>({dispositivo:"mobile"===e.dispositivo?"Mobile":"desktop"===e.dispositivo?"Desktop":"tablet"===e.dispositivo?"Tablet":e.dispositivo,count:e.count})),dataKeys:[{key:"count",name:"Buscas",color:"hsl(var(--primary))"}],xAxisKey:"dispositivo"})})]})]})})]}):null}},97304:function(e,t,s){"use strict";s.d(t,{v:function(){return x}});var r=s(57437),a=s(91436),n=s(77031),l=s(56940),i=s(97059),d=s(62994),o=s(78155),c=s(53250),u=s(54890);function x(e){let{data:t,dataKeys:s,xAxisKey:x,yAxisFormatter:f}=e;return(0,r.jsx)(a.h,{width:"100%",height:350,children:(0,r.jsxs)(n.v,{data:t,margin:{top:5,right:30,left:20,bottom:60},children:[(0,r.jsx)(l.q,{strokeDasharray:"3 3"}),(0,r.jsx)(i.K,{dataKey:x,tick:{fontSize:11},angle:-45,textAnchor:"end",height:80,interval:0}),(0,r.jsx)(d.B,{tick:{fontSize:12},tickFormatter:f}),(0,r.jsx)(o.u,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(e,t)=>"ROAS"===t||"roas"===t?"".concat(Number(e).toFixed(2).replace(".",","),"x"):e}),(0,r.jsx)(c.D,{}),s.map(e=>{let{key:t,name:s,color:a}=e;return(0,r.jsx)(u.$Q,{dataKey:t,name:s,fill:a},t)})]})})}},45136:function(e,t,s){"use strict";s.d(t,{w:function(){return f}});var r=s(57437),a=s(91436),n=s(21156),l=s(56940),i=s(97059),d=s(62994),o=s(78155),c=s(53250),u=s(55487),x=s(50754);function f(e){let{data:t,dataKeys:s,xAxisKey:f="date",yAxisFormatter:m}=e;return(0,r.jsx)(a.h,{width:"100%",height:300,children:(0,r.jsxs)(n.w,{data:t,children:[(0,r.jsx)(l.q,{strokeDasharray:"3 3"}),(0,r.jsx)(i.K,{dataKey:f,tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),(0,r.jsx)(d.B,{tick:{fontSize:12},tickFormatter:m}),(0,r.jsx)(o.u,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(e,t)=>{let r=s.find(e=>e.key===t||e.name===t);return(null==r?void 0:r.formatter)?r.formatter(e):"Investimento"===t||"Receita"===t?(0,x.xG)(e):"ROAS"===t||"roas"===t?"".concat(Number(e).toFixed(2).replace(".",","),"x"):e}}),(0,r.jsx)(c.D,{}),s.map(e=>{let{key:t,name:s,color:a}=e;return(0,r.jsx)(u.x1,{type:"monotone",dataKey:t,name:s,stroke:a,strokeWidth:2,dot:{r:4}},t)})]})})}},49162:function(e,t,s){"use strict";s.d(t,{u:function(){return x}});var r=s(57437),a=s(91436),n=s(86810),l=s(10062),i=s(20407),d=s(78155),o=s(53250),c=s(50754);let u=["hsl(var(--primary))","hsl(var(--secondary))","#8884d8","#82ca9d","#ffc658","#ff7300"];function x(e){let{data:t,colors:s=u}=e;return(0,r.jsx)(a.h,{width:"100%",height:300,children:(0,r.jsxs)(n.u,{children:[(0,r.jsx)(l.by,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:s,value:r}=e;return"".concat(t,": ").concat((100*(s||0)).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((e,t)=>(0,r.jsx)(i.b,{fill:s[t%s.length]},"cell-".concat(t)))}),(0,r.jsx)(d.u,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:e=>(0,c.xG)(e)}),(0,r.jsx)(o.D,{})]})})}},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},ll:function(){return d}});var r=s(57437),a=s(2265),n=s(47984);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-2 p-6",s),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},93022:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var r=s(57437),a=s(47984);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...s})}},2621:function(e,t,s){"use strict";s.d(t,{FilterProvider:function(){return i},j:function(){return d}});var r=s(57437),a=s(2265),n=s(61422);let l=(0,a.createContext)(void 0);function i(e){let{children:t}=e,{startDate:s,endDate:i}=(0,n.e6)(),[d,o]=(0,a.useState)([]),[c,u]=(0,a.useState)(s),[x,f]=(0,a.useState)(i),[m,h]=(0,a.useState)([]),[p,y]=(0,a.useState)([]),[j,v]=(0,a.useState)(!1),[b,g]=(0,a.useState)([]),[D,N]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=localStorage.getItem("tribuzana_filters");if(e)try{let t=JSON.parse(e);t.selectedHotels&&o(t.selectedHotels),t.startDate&&u(t.startDate),t.endDate&&f(t.endDate),t.selectedCidades&&h(t.selectedCidades),t.selectedEstados&&y(t.selectedEstados),void 0!==t.compareYearAgo&&v(t.compareYearAgo)}catch(e){console.error("Erro ao carregar filtros salvos:",e)}},[]),(0,a.useEffect)(()=>{c&&x&&localStorage.setItem("tribuzana_filters",JSON.stringify({selectedHotels:d,startDate:c,endDate:x,selectedCidades:m,selectedEstados:p,compareYearAgo:j,selectedObjectives:b,selectedResultTypes:D}))},[d,c,x,m,p,j,b,D]),(0,r.jsx)(l.Provider,{value:{selectedHotels:d,startDate:c,endDate:x,selectedCidades:m,selectedEstados:p,compareYearAgo:j,selectedObjectives:b,selectedResultTypes:D,setSelectedHotels:o,setDateRange:(e,t)=>{u(e),f(t)},setSelectedCidades:h,setSelectedEstados:y,setCompareYearAgo:v,setSelectedObjectives:g,setSelectedResultTypes:N,resetFilters:()=>{o([]);let{startDate:e,endDate:t}=(0,n.e6)();u(e),f(t),h([]),y([]),v(!1),g([]),N([])}},children:t})}let d=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useFilterContext must be used within a FilterProvider");return e}},47984:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},61422:function(e,t,s){"use strict";s.d(t,{WF:function(){return f},c8:function(){return u},e6:function(){return c},f:function(){return x}});var r=s(64975),a=s(65399),n=s(65696),l=s(86035),i=s(63070),d=s(945),o=s(27742);let c=()=>{let e=new Date,t=(0,r.k)(e,1),s=(0,r.k)(t,6);return{startDate:(0,a.WU)(s,"yyyy-MM-dd"),endDate:(0,a.WU)(t,"yyyy-MM-dd")}},u=()=>{let e=new Date,t=(0,n.z)((0,r.k)(e,7),{weekStartsOn:0}),s=(0,l.v)((0,r.k)(e,7),{weekStartsOn:0});return{startDate:(0,a.WU)(t,"yyyy-MM-dd"),endDate:(0,a.WU)(s,"yyyy-MM-dd")}},x=()=>{let e=new Date,t=(0,r.k)(e,1),s=(0,i.N)(e);return{startDate:(0,a.WU)(s,"yyyy-MM-dd"),endDate:(0,a.WU)(t,"yyyy-MM-dd")}},f=()=>{let e=(0,d.W)(new Date,1),t=(0,i.N)(e),s=(0,o.V)(e);return{startDate:(0,a.WU)(t,"yyyy-MM-dd"),endDate:(0,a.WU)(s,"yyyy-MM-dd")}}},50754:function(e,t,s){"use strict";s.d(t,{p6:function(){return l},rl:function(){return n},uf:function(){return a},xG:function(){return r}});let r=e=>null==e?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),a=e=>null==e?"0":new Intl.NumberFormat("pt-BR").format(e),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null==e?"0%":"".concat(e.toFixed(t),"%")},l=e=>{let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("pt-BR").format(t)}},31047:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])}},function(e){e.O(0,[554,434,189,354,971,117,744],function(){return e(e.s=59029)}),_N_E=e.O()}]);